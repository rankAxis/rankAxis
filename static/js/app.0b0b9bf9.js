(function(t){function e(e){for(var r,n,o=e[0],l=e[1],c=e[2],p=0,u=[];p<o.length;p++)n=o[p],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&u.push(i[n][0]),i[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);d&&d(e);while(u.length)u.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(r=!1)}r&&(s.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},i={app:0},s=[];function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var r=a("85ec"),i=a.n(r);i.a},1:function(t,e){},"147a":function(t,e,a){},"19f3":function(t,e,a){"use strict";var r=a("1d0d"),i=a.n(r);i.a},"1d0d":function(t,e,a){},"1f88":function(t,e,a){t.exports=a.p+"static/img/circle1.9a8a8466.svg"},2:function(t,e){},"21bb":function(t,e,a){"use strict";var r=a("2dad"),i=a.n(r);i.a},"26e5":function(t,e,a){t.exports=a.p+"static/img/circle2.f3eb1ac5.svg"},2726:function(t,e,a){t.exports=a.p+"static/img/cluster1.2ca3fb6f.svg"},"2dad":function(t,e,a){},"33d5":function(t,e,a){},"3b4b":function(t,e,a){t.exports=a.p+"static/img/brokenLine1.5e738f72.svg"},"41a4":function(t,e,a){},"4b315":function(t,e,a){"use strict";var r=a("9fba"),i=a.n(r);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e792");var r=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],o=(a("034f"),a("2877")),l={},c=Object(o["a"])(l,s,n,!1,null,null,null),d=c.exports,p=a("8c4f"),u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[t._m(0),r("div",{staticStyle:{height:"20px"}}),r("div",{staticClass:"main"},[r("div",{staticClass:"left-box"},[t._m(1),r("div",{staticClass:"first-dom"},[r("div",{staticClass:"image-contant"},[r("span",{on:{click:function(e){return t.setScatterIndex(1)}}},[1==t.scatterIndex?r("img",{attrs:{src:a("3b4b"),alt:""}}):r("img",{attrs:{src:a("ac1e"),alt:""}})]),r("span",{on:{click:function(e){return t.setScatterIndex(2)}}},[2==t.scatterIndex?r("img",{staticClass:"clusterImg",attrs:{src:a("2726"),alt:""}}):r("img",{staticClass:"clusterImg",attrs:{src:a("ad8d"),alt:""}})]),r("span",{on:{click:function(e){return t.setScatterIndex(3)}}},[3==t.scatterIndex?r("img",{staticClass:"circleImg",attrs:{src:a("1f88"),alt:""}}):r("img",{staticClass:"circleImg",attrs:{src:a("26e5"),alt:""}})])]),1==t.scatterIndex&&t.testShow?r("ScatterOfD3",{attrs:{"name-list-data":t.nameListData,"tsne-values":t.tsneValues,"rank-data":t.rankData,"rank-axis-data":t.rankAxisData,"field-color":t.fieldColor}}):t._e(),2==t.scatterIndex&&t.testShow?r("ScatterOfD3Two",{attrs:{"name-list-data":t.nameListData,"tsne-values":t.tsneValues,"rank-data":t.rankData,"rank-axis-data":t.rankAxisData,"field-color":t.fieldColor}}):t._e(),3==t.scatterIndex&&t.testShow?r("ScatterOfD3Three",{attrs:{"name-list-data":t.nameListData,"tsne-values":t.tsneValues,"rank-data":t.rankData,"rank-axis-data":t.rankAxisData,"field-color":t.fieldColor},on:{selectedIDsArr:t.selectedIDsArr}}):t._e()],1)]),r("div",{staticClass:"right-box"},[r("div",{staticStyle:{height:"30%","border-bottom":"1px solid #ccc","border-right":"1px solid #ccc"}},[r("ScatterLink",{attrs:{"name-list-data":t.nameListData,"tsne-arrays":t.tsneArrays,"rank-axis-data-arrays":t.rankAxisDataArrays,"field-color":t.fieldColor}})],1),r("div",{staticStyle:{height:"70%","border-bottom":"1px solid #ccc","border-right":"1px solid #ccc","padding-right":"4px","padding-left":"4px"}},[r("RankAxisProject",{attrs:{"name-list-data":t.nameListData,"tsne-values":t.tsneValues,"rank-data":t.rankData,"rank-axis-data":t.rankAxisData,"project-axis-data":t.projectAxisData,"field-color":t.fieldColor,"field-symbol":t.fieldSymbol,chooseColorArr:t.chooseColorArr}})],1)])]),r("div",{staticClass:"table-view"},[r("TableView",{attrs:{"table-data":t.tableData,"rank-axis-data-table":t.rankAxisDataTable,"field-color":t.fieldColor,"field-symbol":t.fieldSymbol,valueWeightData:t.valueWeight,"rank-axis-data":t.rankAxisData},on:{dragBank:t.dragBank,getChooseColor:t.getChooseColor}})],1)])},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"flex flex-center space-between header"},[a("div",{staticClass:"nav"},[a("span",{staticClass:"text-primary"},[t._v("RankAxis: Towards a Systematic Combination of Projection and Ranking in Multi-Attribute Data Exploration")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"introduce"},[a("div",{staticClass:"data-select"},[a("p",{staticClass:"t-align-c"},[a("span",{staticClass:"font-bold mr-10"},[t._v("Load data:")]),a("select",{attrs:{id:"items"}},[a("option",{attrs:{value:"name"}},[t._v(" Chinese Bank Credit Risk Rating Data in 2018 ")])])])])])}],m=a("e83a"),f=a.n(m),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"svg-container",attrs:{id:"scatterD3"}})},y=[],k=a("6a04"),v=a("910e");a("470b");var x={name:"ScatterOfD3",props:{tsneValues:{type:Array,default:()=>[]},nameListData:{type:Array,default:()=>[]},rankData:{type:Array,default:()=>[]},rankAxisData:{type:Array,default:()=>[]},fieldColor:{}},data(){return{id:"scatterD3",tsneValuesData:[],nameList:[],svg:null,selectedCluster:[]}},computed:{},watch:{tsneValues(t){this.tsneValuesData=t,this.init()},nameListData(t){this.nameList=t},rankData(t){console.log(t)},fieldColor(t){}},mounted(){console.log("enter scatter rankAxisData",this.rankAxisData),this.init()},methods:{init(){d3.select("#svg"+this.id).remove();let t=this,e={};t.rankAxisData.map((a,r)=>{e[a["name"]]={},e[a["name"]]["name"]=a["name"],e[a["name"]]["rank"]=t.rankData[r],e[a["name"]]["score"]=a["score"],e[a["name"]]["weightDim"]=a["weightDim"]});let{clientWidth:a,clientHeight:r}=document.getElementById("scatterD3"),s={left:30,right:10,top:25,bottom:30},n=[],o=[];this.tsneValues.forEach(t=>{let[e,a]=t;n.push(e),o.push(a)}),a=a-s.left-s.right,r=r-s.top-s.bottom;let l=d3.zoom().on("zoom",x),c=d3.select("#"+this.id).append("svg").attr("width",a+s.left+s.right).attr("height",r+s.left+s.right).attr("id","svg"+this.id).call(l);c=c.append("g").attr("transform","translate("+s.left+","+s.top+")");let d=d3.scaleLinear().range([0,a]).domain([d3.min(n)-1,d3.max(n)+1]),p=d3.scaleLinear().range([r,0]).domain([d3.min(o)-1,d3.max(o)+1]);d3.axisBottom().scale(d),d3.axisLeft().scale(p),c.append("g").attr("class","x axis").attr("transform","translate(0,"+r+")"),c.append("g").attr("class","y axis");c.append("g").attr("transform","translate("+s.left+","+s.top+")").attr("class","projectionG"),c.append("svg").attr("transform","translate("+s.left+","+s.top+")");let u=Object(k["a"])().attr("class","d3-tip").offset([-10,0]).html((function(t){let e="Name: "+t.name+"<br>Rank: "+t.rank+"<br>Score: "+t.score.toFixed(1);for(let a in t["weightDim"])e=e+"<br>"+a+": "+t["weightDim"][a].toFixed(1);return e}));c.call(u);let h=d3.scaleLinear().range([0,5]).domain([0,100]),m=d3.interpolateHsl("white","#d6d0d0"),f=c.selectAll(".project_point").data(this.tsneValues).enter().append("circle").attr("r",(t,a)=>h(e[this.nameListData[a]]["score"])).attr("fill",(t,a)=>m(e[this.nameListData[a]]["score"]/100)).attr("cx",t=>d(t[0])).attr("cy",t=>p(t[1])).attr("stroke","black").attr("stroke-width","1px").attr("class",(t,e)=>this.nameListData[e]+" uItem").attr("id",(t,e)=>this.nameListData[e]+"_tsne").attr("title",(t,e)=>this.nameListData[e]).on("mouseover",(function(a,r){d3.select("#project_text_"+t.nameListData[r]).style("fill","black");t.nameListData[r],t.rankData[r],e[t.nameListData[r]]["score"],e[t.nameListData[r]]["weightDim"];d3.select(this).attr("stroke-width","2px").attr("cursor","pointer"),d3.selectAll(".arcPath_"+t.nameListData[r]).style("opacity",1)})).on("mouseout",(function(){d3.select("#project_text_"+t.nameListData[i]).style("fill","grey"),d3.select(this).attr("stroke-width","1px").attr("cursor","default"),d3.selectAll(".arcPath_"+t.nameListData[i]).style("opacity",.2)})),g=c.selectAll(".project_text").data(this.tsneValues).enter().append("text").attr("id",(e,a)=>"project_text_"+t.nameListData[a]).attr("x",t=>d(t[0])).attr("y",t=>p(t[1])).attr("dx",10).attr("dy",5).style("font-size","6px").style("font-weight","light").style("fill","grey").text((t,e)=>this.nameListData[e]),y=d3.line().x((function(t){return d(t[0])})).y((function(t){return p(t[1])}));for(let i=0;i<this.tsneValues.length-1;i++){let t=[this.tsneValues[i],this.tsneValues[i+1]];c.append("path").attr("d",y(t)).attr("stroke","grey").attr("stroke-width",1).attr("fill","none").attr("class","diy-path").style("marker-end","url(#end-arrow)")}d3.scaleLinear().range([0,5]).domain([0,100]),Object.keys(e[Object.keys(e)[0]]["weightDim"]);let v=t.fieldColor;function x(){let a=d3.event.transform.rescaleX(d),r=d3.event.transform.rescaleY(p);console.log(d3.event.transform),f.attr("cx",t=>a(t[0])).attr("cy",t=>r(t[1])),g.attr("x",t=>a(t[0])).attr("y",t=>r(t[1]));let i=d3.line().x((function(t){return a(t[0])})).y((function(t){return r(t[1])}));d3.select("#"+t.id).selectAll(".diy-path").remove();for(let e=0;e<t.tsneValues.length-1;e++){let a=[t.tsneValues[e],t.tsneValues[e+1]];c.append("path").attr("d",i(a)).attr("stroke","black").attr("class","diy-path").attr("stroke-width",1).attr("fill","none").style("marker-end","url(#end-arrow)")}c.append("svg:defs").append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",10).attr("markerWidth",6).attr("markerHeight",10).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","grey"),c.selectAll(".arcPath").remove(),Object.keys(e).map(t=>{let a=e[t],r=c.select("#"+t+"_tsne").attr("cx"),i=c.select("#"+t+"_tsne").attr("cy"),s=c.append("g").attr("transform","translate("+r+","+i+")"),n=2*Math.PI,o=1/Object.keys(a["weightDim"]).length;Object.keys(a["weightDim"]).map((e,r)=>{let i=h(a["score"]),l=d3.arc().innerRadius(i).outerRadius(i+20*h(a["weightDim"][e])).startAngle(r*o*n).endAngle((r+1)*o*n);s.append("path").attr("class","arcPath arcPath_"+t).attr("stroke","grey").style("opacity",.2).attr("stroke-width","1px").style("fill",v(e)).attr("d",l)})})}Object.keys(e).map(t=>{let a=e[t],r=c.select("#"+t+"_tsne").attr("cx"),i=c.select("#"+t+"_tsne").attr("cy"),s=c.append("g").attr("transform","translate("+r+","+i+")"),n=2*Math.PI,o=1/Object.keys(a["weightDim"]).length;Object.keys(a["weightDim"]).map((e,r)=>{let i=h(a["score"]),l=d3.arc().innerRadius(i).outerRadius(i+20*h(a["weightDim"][e])).startAngle(r*o*n).endAngle((r+1)*o*n);s.append("path").attr("class","arcPath arcPath_"+t).style("fill",v(e)).attr("stroke","grey").attr("stroke-width","1px").attr("d",l).attr("opacity",.2).on("mouseover",(function(e,a){d3.select("#project_text_"+t).style("fill","black"),d3.selectAll(".arcPath_"+t).style("opacity",1),d3.select(this).attr("stroke-width","2px").attr("cursor","pointer")})).on("mouseout",(function(){d3.select("#project_text_"+t).style("fill","grey"),d3.selectAll(".arcPath_"+t).style("opacity",.2),d3.select(this).attr("stroke-width","1px").attr("cursor","default")}))})}),c.append("svg:defs").append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",10).attr("markerWidth",8).attr("markerHeight",10).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","grey")}}},R=x,b=(a("9910"),Object(o["a"])(R,g,y,!1,null,null,null)),D=b.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"svg-container",attrs:{id:"scatterD3Two"}})},A=[];var P={name:"scatterD3Two",props:{tsneValues:{type:Array,default:()=>[]},nameListData:{type:Array,default:()=>[]},rankData:{type:Array,default:()=>[]},rankAxisData:{type:Array,default:()=>[]},fieldColor:{}},data(){return{id:"scatterD3Two",tsneValuesData:[],nameList:[],svg:null,selectedCluster:[]}},computed:{},watch:{tsneValues(t){this.tsneValuesData=t,console.log("two"),this.init()},nameListData(t){this.nameList=t},rankData(t){console.log(t)},fieldColor(t){}},mounted(){console.log("enter scatter rankAxisData",this.rankAxisData),this.init()},methods:{init(){d3.select("#svg"+this.id).remove();let t=this,e={};t.rankAxisData.map((a,r)=>{e[a["name"]]={},e[a["name"]]["name"]=a["name"],e[a["name"]]["rank"]=t.rankData[r],e[a["name"]]["score"]=a["score"],e[a["name"]]["weightDim"]=a["weightDim"]});let{clientWidth:a,clientHeight:r}=document.getElementById("scatterD3Two"),i={left:30,right:10,top:25,bottom:30},s=[],n=[];this.tsneValues.forEach(t=>{let[e,a]=t;s.push(e),n.push(a)}),a=a-i.left-i.right,r=r-i.top-i.bottom;let o=d3.zoom().on("zoom",D),l=d3.select("#"+this.id).append("svg").attr("width",a+i.left+i.right).attr("height",r+i.left+i.right).attr("id","svg"+this.id).call(o);l=l.append("g").attr("transform","translate("+i.left+","+i.top+")");let c=d3.scaleLinear().range([0,a]).domain([d3.min(s)-1,d3.max(s)+1]),d=d3.scaleLinear().range([r,0]).domain([d3.min(n)-1,d3.max(n)+1]);d3.axisBottom().scale(c),d3.axisLeft().scale(d),l.append("g").attr("class","x axis").attr("transform","translate(0,"+r+")"),l.append("g").attr("class","y axis");l.append("g").attr("transform","translate("+i.left+","+i.top+")").attr("class","projectionG"),l.append("svg").attr("transform","translate("+i.left+","+i.top+")");let p=Object(k["a"])().attr("class","d3-tip").offset([-10,0]).html((function(t){let e="Name: "+t.name+"<br>Rank: "+t.rank+"<br>Score: "+t.score.toFixed(1);for(let a in t["weightDim"])e=e+"<br>"+a+": "+t["weightDim"][a].toFixed(1);return e}));l.call(p);let u=d3.scaleLinear().range([0,5]).domain([0,100]),h=d3.interpolateHsl("white","#d6d0d0"),m=l.selectAll(".project_point").data(this.tsneValues).enter().append("circle").attr("r",(t,a)=>u(e[this.nameListData[a]]["score"])).attr("fill","none").attr("fill",(t,a)=>h(e[this.nameListData[a]]["score"]/100)).attr("cx",t=>c(t[0])).attr("cy",t=>d(t[1])).attr("stroke","black").attr("stroke-width","1px").attr("class",(t,e)=>this.nameListData[e]+" uItem "+this.nameListData[e]+"_cluster").attr("id",(t,e)=>this.nameListData[e]+"_tsne").attr("title",(t,e)=>this.nameListData[e]).on("mouseover",(function(a,r){d3.select("#project_text_"+t.nameListData[r]).style("fill","black");t.nameListData[r],t.rankData[r],e[t.nameListData[r]]["score"],e[t.nameListData[r]]["weightDim"];d3.select(this).attr("stroke-width","2px").attr("cursor","pointer"),d3.selectAll(".arcPath_"+t.nameListData[r]).style("opacity",1)})).on("mouseout",(function(e,a){d3.select("#project_text_"+t.nameListData[a]).style("fill","grey"),d3.select(this).attr("stroke-width","1px").attr("cursor","default"),d3.selectAll(".arcPath_"+t.nameListData[a]).style("opacity",.2)})),f=l.selectAll(".project_text").data(this.tsneValues).enter().append("text").attr("id",(e,a)=>"project_text_"+t.nameListData[a]).attr("x",t=>c(t[0])).attr("y",t=>d(t[1])).attr("dx",10).attr("dy",5).style("font-size","6px").style("font-size","6px").style("fill","grey").text((t,e)=>{let a=this.nameListData[e],r=0;return this.rankAxisData.map(t=>{a==t.name&&(r=t.cluster)}),a+"("+r+")"}),g=(d3.line().x((function(t){return c(t[0])})).y((function(t){return d(t[1])})),d3.scaleLinear().range([0,5]).domain([0,100]),Object.keys(e[Object.keys(e)[0]]["weightDim"]),t.fieldColor);Object.keys(e).map(t=>{let a=e[t],r=l.select("#"+t+"_tsne").attr("cx"),i=l.select("#"+t+"_tsne").attr("cy"),s=l.append("g").attr("transform","translate("+r+","+i+")"),n=2*Math.PI,o=1/Object.keys(a["weightDim"]).length;Object.keys(a["weightDim"]).map((e,r)=>{let i=u(a["score"]),l=d3.arc().innerRadius(i).outerRadius(i+20*u(a["weightDim"][e])).startAngle(r*o*n).endAngle((r+1)*o*n);s.append("path").attr("class","arcPath arcPath_"+t).style("fill",g(e)).attr("stroke","grey").attr("stroke-width","1px").attr("d",l).style("opacity",.2).on("mouseover",(function(e,a){d3.select("#project_text_"+t).style("fill","black"),d3.selectAll(".arcPath_"+t).style("opacity",1),d3.select(this).attr("stroke-width","2px").attr("cursor","pointer")})).on("mouseout",(function(){d3.select("#project_text_"+t).style("fill","grey"),d3.select(this).style("opacity",.2),d3.selectAll(".arcPath_"+t).style("opacity",.2),d3.select(this).attr("stroke-width","1px").attr("cursor","default")}))})}),l.append("svg:defs").append("svg:marker").attr("id","triangle").attr("refX",6).attr("refY",6).attr("markerWidth",12).attr("markerHeight",12).attr("viewBox","0 0 12 12").attr("markerUnits","strokeWidth").attr("orient","auto").append("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2").style("fill","grey");let y=[];this.rankAxisData.map(t=>{console.log(t["name"],t.cluster),y.push(t.cluster)}),y=[...new Set(y)];let v={};y.map(t=>{let e=[];this.rankAxisData.map(a=>{a.cluster==t&&e.push(a.name)}),v[t]=e});let x=[];for(let k in v){let t=0,e=0,a=v[k].length;v[k].map(a=>{let r=l.select("."+a+"_cluster").attr("cx"),i=l.select("."+a+"_cluster").attr("cy");t+=parseFloat(r),e+=parseFloat(i)}),x.push([t/a,e/a])}l.selectAll(".center").remove(),0==x.length&&l.selectAll(".lineD").remove(),l.selectAll(".center").data(x).enter().append("g").attr("title",(t,e)=>"cluster"+(e+1)).attr("class","center");let R=l.selectAll(".center");R.append("circle").attr("r",4).attr("fill","grey").attr("cx",t=>t[0]).attr("cy",t=>t[1]).attr("stroke","black"),R.append("text").data(x).attr("x",t=>t[0]).attr("y",t=>t[1]).attr("dx",10).attr("dy",5).attr("fill","black").text((t,e)=>"Average of Rating "+(e+1)).style("font-size","10px").style("font-weight","bold"),l.append("svg:defs").append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",10).attr("markerWidth",5).attr("markerHeight",5).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","grey");let b=d3.line().x((function(t){return t[0]})).y((function(t){return t[1]}));for(let k=0;k<x.length-1;k++){let t=[x[k],x[k+1]];l.append("path").attr("class","lineD").attr("d",b(t)).attr("stroke","#959191").attr("stroke-width",2).attr("marker-end","url(#end-arrow)").attr("fill","none")}function D(){let t=d3.event.transform.rescaleX(c),a=d3.event.transform.rescaleY(d);console.log(d3.event.transform),m.attr("cx",e=>t(e[0])).attr("cy",t=>a(t[1])),f.attr("x",e=>t(e[0])).attr("y",t=>a(t[1])),d3.select("#scatterD3Two").selectAll(".lineD").remove(),d3.select("#scatterD3Two").selectAll(".center").remove();let r=[];for(let e in v){let t=0,a=0,i=v[e].length;v[e].map(e=>{let r=l.select("."+e+"_cluster").attr("cx"),i=l.select("."+e+"_cluster").attr("cy");t+=parseFloat(r),a+=parseFloat(i)}),r.push([t/i,a/i])}0==r.length&&l.selectAll(".lineD").remove(),l.selectAll(".center").data(r).enter().append("g").attr("title",(t,e)=>"cluster"+(e+1)).attr("class","center");let i=l.selectAll(".center");i.append("circle").attr("r",5).attr("fill","none").attr("cx",t=>t[0]).attr("cy",t=>t[1]).attr("stroke","black"),i.append("text").data(r).attr("x",t=>t[0]).attr("y",t=>t[1]).attr("dx",10).attr("dy",5).attr("fill","black").text((t,e)=>"Average of Rating "+(e+1)).style("font-size","10px").style("font-weight","bold"),l.append("svg:defs").append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",10).attr("markerWidth",6).attr("markerHeight",10).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","#959191");let s=d3.line().x((function(t){return t[0]})).y((function(t){return t[1]}));for(let e=0;e<r.length-1;e++){let t=[r[e],r[e+1]];l.append("path").attr("class","lineD").attr("d",s(t)).attr("stroke","#959191").attr("stroke-width",1.5).attr("marker-end","url(#end-arrow)").attr("fill","none")}l.selectAll(".arcPath").remove(),Object.keys(e).map(t=>{let a=e[t],r=l.select("#"+t+"_tsne").attr("cx"),i=l.select("#"+t+"_tsne").attr("cy"),s=l.append("g").attr("transform","translate("+r+","+i+")"),n=2*Math.PI,o=1/Object.keys(a["weightDim"]).length;Object.keys(a["weightDim"]).map((e,r)=>{let i=u(a["score"]),l=d3.arc().innerRadius(i).outerRadius(i+20*u(a["weightDim"][e])).startAngle(r*o*n).endAngle((r+1)*o*n);s.append("path").style("opacity",.2).attr("class","arcPath arcPath_"+t).attr("stroke","grey").attr("stroke-width","1px").style("fill",g(e)).attr("d",l)})})}}}},C=P,_=(a("bed1"),Object(o["a"])(C,w,A,!1,null,null,null)),L=_.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"svg-container",attrs:{id:"scatterD3Three"}})},S=[];let q=v;var O={name:"ScatterOfD3",props:{tsneValues:{type:Array,default:()=>[]},nameListData:{type:Array,default:()=>[]},rankData:{type:Array,default:()=>[]},rankAxisData:{type:Array,default:()=>[]},fieldColor:{type:Object,default:()=>{}}},data(){return{id:"scatterD3Three",tsneValuesData:[],nameList:[],svg:null,selectedCluster:[]}},computed:{},watch:{tsneValues(t){this.tsneValuesData=t,this.init()},nameListData(t){this.nameList=t},fieldColor(t){}},mounted(){this.init()},methods:{init(){d3.select("#svg"+this.id).remove();let t=this,e={};t.rankAxisData.map((a,r)=>{e[a["name"]]={},e[a["name"]]["name"]=a["name"],e[a["name"]]["rank"]=t.rankData[r],e[a["name"]]["score"]=a["score"],e[a["name"]]["weightDim"]=a["weightDim"]});let{clientWidth:a,clientHeight:r}=document.getElementById("scatterD3Three"),s={left:30,right:10,top:25,bottom:30},n=[],o=[];this.tsneValues.forEach(t=>{let[e,a]=t;n.push(e),o.push(a)}),a=a-s.left-s.right,r=r-s.top-s.bottom,this.svg=d3.select("#"+this.id).append("svg").attr("width",a+s.left+s.right).attr("height",r+s.left+s.right).attr("id","svg"+this.id);let l=this.svg.append("g").attr("transform","translate("+s.left+","+s.top+")"),c=d3.scaleLinear().range([0,a]).domain([d3.min(n)-1,d3.max(n)+1]),d=d3.scaleLinear().range([r,0]).domain([d3.min(o)-1,d3.max(o)+1]);d3.axisBottom().scale(c),d3.axisLeft().scale(d);l.append("g").attr("transform","translate("+s.left+","+s.top+")").attr("class","projectionG"),l.append("svg").attr("transform","translate("+s.left+","+s.top+")"),this.svg.selectAll("g").data(this.tsneValues).enter().append("g").attr("class","u").attr("title",(t,e)=>this.nameListData[e]);let p=Object(k["a"])().attr("class","d3-tip").offset([-10,0]).html((function(t){let e="Name: "+t.name+"<br>Rank: "+t.rank+"<br>Score: "+t.score.toFixed(1);for(let a in t["weightDim"])e=e+"<br>"+a+": "+t["weightDim"][a].toFixed(1);return e}));l.call(p);let u=d3.scaleLinear().range([0,5]).domain([0,100]),h=d3.interpolateHsl("white","#d6d0d0");l.selectAll(".project_point").data(this.tsneValues).enter().append("circle").attr("r",(t,a)=>u(e[this.nameListData[a]]["score"])).attr("fill",(t,a)=>h(e[this.nameListData[a]]["score"]/100)).attr("cx",t=>c(t[0])).attr("cy",t=>d(t[1])).attr("stroke","black").attr("stroke-width","1px").attr("class",(t,e)=>this.nameListData[e]+" uItem").attr("id",(t,e)=>this.nameListData[e]+"_tsne").attr("title",(t,e)=>this.nameListData[e]).on("mouseover",(function(a,r){d3.select("#project_text_"+t.nameListData[r]).style("fill","black");t.nameListData[r],t.rankData[r],e[t.nameListData[r]]["score"],e[t.nameListData[r]]["weightDim"];d3.select(this).attr("stroke-width","2px").attr("cursor","pointer"),d3.selectAll(".arcPath_"+t.nameListData[r]).style("opacity",1)})).on("mouseout",(function(){d3.select("#project_text_"+t.nameListData[i]).style("fill","grey"),d3.select(this).attr("stroke-width","1px").attr("cursor","default"),d3.selectAll(".arcPath_"+t.nameListData[i]).style("opacity",.2)})),l.selectAll(".project_text").data(this.tsneValues).enter().append("text").attr("id",(e,a)=>"project_text_"+t.nameListData[a]).attr("x",t=>c(t[0])).attr("y",t=>d(t[1])).attr("dx",10).attr("dy",5).style("font-size","6px").style("font-weight","light").style("fill","grey").text((t,e)=>this.nameListData[e]),d3.scaleLinear().range([0,5]).domain([0,100]);Object.keys(e[Object.keys(e)[0]]["weightDim"]);let m=t.fieldColor;Object.keys(e).map(t=>{console.warn(t);let a=e[t],r=l.select("#"+t+"_tsne").attr("cx"),i=l.select("#"+t+"_tsne").attr("cy"),s=l.append("g").attr("transform","translate("+r+","+i+")"),n=2*Math.PI,o=1/Object.keys(a["weightDim"]).length;Object.keys(a["weightDim"]).map((e,r)=>{let i=u(a["score"]),l=d3.arc().innerRadius(i).outerRadius(i+20*u(a["weightDim"][e])).startAngle(r*o*n).endAngle((r+1)*o*n);s.append("path").attr("class","arcPath arcPath_"+t).style("fill",m(e)).attr("opacity",.2).attr("stroke","grey").attr("stroke-width","1px").attr("d",l).on("mouseover",(function(){d3.select("#project_text_"+t).style("fill","black"),d3.selectAll(".arcPath_"+t).style("opacity",1),d3.select(this).attr("stroke-width","2px").attr("cursor","pointer")})).on("mouseout",(function(){d3.select("#project_text_"+t).style("fill","grey"),d3.selectAll(".arcPath_"+t).style("opacity",.2),d3.select(this).attr("stroke-width","1px").attr("cursor","default")}))})}),this.lassoDraw(this.svg)},lassoDraw(t){let e,a,r=this,i=t.selectAll(".uItem"),s=q.lasso();s.closePathSelect(!0).closePathDistance(100).items(i).targetArea(t).on("start",(function(){s.items().classed("not_possible",!0).classed("selected",!1)})).on("draw",(function(){s.possibleItems().classed("not_possible",!1).classed("possible",!0),s.notPossibleItems().classed("not_possible",!0).classed("possible",!1),e=d3.select(".drawn").attr("d"),a=d3.select(".loop_close").attr("d")})).on("end",(function(){s.items().classed("not_possible",!1).classed("possible",!1),s.selectedItems().classed("selected",!0).each((function(){d3.select(this).select("circle").attr("stroke-width","2px")}));let i=[];s.selectedItems().each((function(){i.push(d3.select(this).attr("title"))})),i.length>0?i.map((function(t){d3.selectAll(".u").select("."+t).attr("stroke-width","2px")})):d3.selectAll(".u").select("circle").attr("stroke-width","1px"),e&&a?i.length>0&&r.selectedCluster.push({drawnPath:e,loopClosePath:a,selectedIDs:i}):r.selectedCluster=[],e="",a="",r.$emit("lassoData",i),s.notSelectedItems().each((function(){d3.select(this).select("circle").attr("r",5).attr("stroke-width","1px")})),r.$emit("selectedIDsArr",r.selectedCluster),r.average(r.selectedCluster,t),r.lassoCrossed(t)})),t.call(s)},lassoCrossed(t){t.selectAll(".clusterDrawn").remove(),t.selectAll(".clusterClose").remove(),t.selectAll(".selectedCluster").remove(),t.selectAll(".selectedCluster").data(this.selectedCluster).enter().append("g").attr("class","selectedCluster");let e=t.selectAll(".selectedCluster");e.append("path").attr("class","clusterDrawn").attr("d",(function(t){return t.drawnPath})),e.append("path").attr("class","clusterClose").attr("d",t=>t.loopClosePath)},average(t,e){let a={left:30,right:10,top:25,bottom:30},r=[];t.length>0&&t.map(t=>{let a=0,i=0,s=t.selectedIDs.length;t.selectedIDs.map(t=>{let r=e.select("#"+t+"_tsne").attr("cx"),s=e.select("#"+t+"_tsne").attr("cy");a+=parseFloat(r),i+=parseFloat(s)}),r.push([a/s,i/s])}),e.selectAll(".center").remove(),0===r.length&&e.selectAll(".lineD").remove(),e.selectAll(".center").data(r).enter().append("g").attr("class","center");let i=e.selectAll(".center");i.append("circle").attr("r",4).attr("fill","grey").attr("cx",t=>t[0]+a.left).attr("cy",t=>t[1]+a.top).attr("stroke","black"),e.append("svg:defs").append("svg:marker").attr("id","end-arrow").attr("viewBox","0 -5 10 10").attr("refX",10).attr("markerWidth",6).attr("markerHeight",10).attr("orient","auto").append("svg:path").attr("d","M0,-5L10,0L0,5").attr("fill","grey");let s=d3.line().x((function(t){return t[0]+a.left})).y((function(t){return t[1]+a.top}));r.length>1&&e.append("path").attr("class","lineD").attr("d",s(r)).attr("stroke","grey").attr("stroke-width",2).attr("marker-end","url(#end-arrow)").attr("fill","none")}}},z=O,V=(a("9137"),Object(o["a"])(z,j,S,!1,null,null,null)),I=V.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tableView",attrs:{id:"tableView"}},[a("div",{staticClass:"btn-box",attrs:{id:"areaDiv"}},[a("i",{staticClass:"el-icon-edit"}),a("span",{staticClass:"saveBtn",on:{click:t.saveProject}},[t._v("Save Scheme")]),a("div",{staticStyle:{margin:"0 10px"}},[a("c-progress",{staticClass:"c-progress",attrs:{percent:7,"show-slider":!0,width:60,"slider-width":16,"show-per-text":!0},on:{percentChange:t.onPercentChange}})],1),a("div",{staticStyle:{"margin-right":"16px"},attrs:{id:"clusterSVGBox"}}),a("div",{staticClass:"legendColor"},t._l(t.legendArr,(function(e,r){return a("span",{key:r,staticClass:"item",on:{click:function(a){return t.chooseColor(e.name,r)}}},[a("span",{staticClass:"itemColor",style:{backgroundColor:e.flag?e.color:"#bfbfbf"}}),t._v(" "+t._s(e.name)+" ")])})),0)]),a("div",{staticClass:"costNumberView",attrs:{id:"costNumber"}})])},B=[],N=a("1157"),M=a.n(N),W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"c-progress",staticStyle:{width:"100px"}},[a("div",{ref:"progress",staticClass:"c-progress-outer",style:t.setProgressBgStyle},[a("div",{staticClass:"c-progress-inner",style:t.setProgressStyle}),t.showSlider?a("div",{ref:"slider",staticClass:"c-progress-slider",style:t.setSliderStyle}):t._e()]),t.showPerText?a("span",[t._v(t._s(t.tempPercent))]):t._e()])},E=[];const F={success:"#13ce66",fail:"#ff4949",warning:"#e6a23c",default:"#409EFF"};var H={name:"CProgress",props:{percent:{type:Number,default:60},showSlider:{type:Boolean,default:!0},showPerText:{type:Boolean,default:!0},width:{type:Number,default:300},bgColor:{type:String,default:"#ebeef5"},progressColor:{type:String,default:"#409EFF"},sliderWidth:{type:Number,default:20},type:{type:String,default:F.default}},data(){return{sliderLeft:0,progressWidth:0,tempPercent:0}},computed:{setProgressBgStyle(){return{width:this.width+this.sliderWidth+"px"}},setProgressStyle(){const t=F[this.type]||this.progressColor;return{width:this.progressWidth+"px",background:t}},setSliderStyle(){const t=F[this.type]||this.progressColor;return{border:"1px solid "+t,width:this.sliderWidth+"px",height:this.sliderWidth+"px",left:this.sliderLeft+"px"}}},mounted(){this.sliderLeft=this.width/10*this.percent,this.progressWidth=this.sliderLeft+this.sliderWidth,this.tempPercent=this.percent,this.addListener()},methods:{addListener(){const t=this.$refs.slider,e=this.$refs.progress;let a=!1,r=0;e.onclick=a=>{if(a.target==t)return;let r=e.offsetLeft;this.sliderLeft=a.pageX-r,this.sliderLeft<=0&&(this.sliderLeft=0),this.sliderLeft>=this.width&&(this.sliderLeft=this.width),this._countCurPercent()},t.onmousedown=e=>{a=!0;let i=t.offsetLeft;r=e.pageX-i},e.onmousemove=t=>{a&&t.pageX-r>=0&&t.pageX-r<=this.width-0&&(this.sliderLeft=t.pageX-r,this._countCurPercent())},e.onmouseup=()=>{a=!1}},_countCurPercent(){this.tempPercent=Math.ceil(parseInt(this.sliderLeft/this.width*10)),this.progressWidth=this.sliderLeft+20,this.tempPercent<=0&&(this.progressWidth=0,this.sliderLeft=0),this.tempPercent>=10&&(this.progressWidth=this.width+20,this.sliderLeft=this.width),this.$emit("percentChange",this.tempPercent)}}},$=H,G=(a("19f3"),Object(o["a"])($,W,E,!1,null,"b0b7904a",null)),X=G.exports,J={name:"TableView",props:{tableData:{type:Array,default:()=>[]},rankAxisDataTable:{type:Array,default:()=>[]},fieldColor:{},valueWeightData:{},fieldSymbol:{},rankAxisData:{type:Array,default:()=>[]}},components:{cProgress:X},data(){return{clusterSVG:null,isPageShow:!1,sortAscending:!0,currentPage:1,pageSize:10,total:20,selectDadioArr:[],selectAllFlag:!1,chooseArr:[],selectedTableData:[],tableDataObj:{name:{label:"Name",value:""},rank:{label:"Rank",value:""},cluster:{label:"Rating",value:""},assetSize:{label:"assetSize",value:""},capitalAdequacyRatio:{label:"capitalAdequacyRatio",value:""},nonPerformingLoansRatio:{label:"nonPerformingLoansRatio",value:""},concernRate:{label:"concernRate",value:""},provisionCoverage:{label:"provisionCoverage",value:""},liquidityRatio:{label:"liquidityRatio",value:""},assetProfitRatio:{label:"assetProfitRatio",value:""},capitalProfitRatio:{label:"capitalProfitRatio",value:""}},valueWeight:{assetSize:{label:"assetSize",value:""},capitalAdequacyRatio:{label:"capitalAdequacyRatio",value:""},nonPerformingLoansRatio:{label:"nonPerformingLoansRatio",value:""},concernRate:{label:"concernRate",value:""},provisionCoverage:{label:"provisionCoverage",value:""},liquidityRatio:{label:"liquidityRatio",value:""},assetProfitRatio:{label:"assetProfitRatio",value:""},capitalProfitRatio:{label:"capitalProfitRatio",value:""}},svgBoxIndex:1,stackedFigureData:[],dragBankArr:[],stackedDataFlag:!0,legendArr:[{name:"assetSize",color:"",flag:!0},{name:"capitalAdequacyRatio",color:"",flag:!0},{name:"nonPerformingLoansRatio",color:"",flag:!0},{name:"concernRate",color:"",flag:!0},{name:"provisionCoverage",color:"",flag:!0},{name:"liquidityRatio",color:"",flag:!0},{name:"assetProfitRatio",color:"",flag:!0},{name:"capitalProfitRatio",color:"",flag:!0}],chooseColorArr:["assetSize","capitalAdequacyRatio","nonPerformingLoansRatio","concernRate","provisionCoverage","liquidityRatio","assetProfitRatio","capitalProfitRatio"],clusterNum:5,firstWid:0,firstHeiFlag:!0}},computed:{},watch:{tableData(t){let e=[];for(let a=0;a<t.length;a++)t.map(t=>{t.rank==a+1&&e.push(t)});d3.select("#svgDiv").remove(),this.draw(e)},rankAxisDataTable(t){let e=Object.keys(t[0]["weightDim"]);this.drawClass(e)},chooseColorArr(t){this.drawClass(t),console.log("tableview",t)},fieldColor(t){},fieldSymbol(t){}},mounted(){this.initClass()},methods:{draw(t){t.map(t=>{this.rankAxisData.map(e=>{t.name==e.name&&(t["cluster"]=e.cluster)})}),this.stackedDataFlag=!0;let e=[],a=[];for(let u in this.tableDataObj){let t={name:u,label:this.tableDataObj[u].label,value:this.tableDataObj[u].value};a.push(u),e.push(t)}let r=this;d3.select(".costNumberView").select(".table").remove();let i=d3.select(".costNumberView").append("div").attr("id","table").attr("class","table"),s=d3.select(".costNumberView").append("div").attr("id","svgDiv");s.append("div").attr("id","svgBox").style("width","100%").style("position","relative").style("top","-40px").style("overflow-y","auto").attr("class","svgDiv");let n=d3.select(".costNumberView").append("div").attr("class","tr th"),o=i.append("div").attr("class","tbody").attr("id","tbody").style("counter-reset",(function(){if(r.isPageShow){let t=(r.currentPage-1)*r.pageSize;return"sectioncounter "+t}return"sectioncounter 0"}));n.selectAll("div").data(e).enter().append("div").attr("class",(function(t){return"name"==t.name?"td firstRow firstRowOne":"td otherRow"})).attr("style","justify-content:center;"),n.select(".firstRowOne").append("div").attr("class","beforeRow orderRow"),n.select(".firstRowTwo").append("div").attr("class","beforeRow cityRow"),n.select(".firstRowThree").append("div").attr("class","beforeRow cityRow"),n.selectAll(".beforeRow").append("div").attr("class",()=>"firstText").style("text-align",(function(t){if("name"==t.name)return"center"})).style("width",(function(t){if("name"==t.name)return"80px"})).text((function(t){return t.label}));let l=n.selectAll(".otherRow").append("div").attr("class","topRow");l.append("span").attr("class","topCommon topFirst").attr("title",(function(t){return t.label})).text((function(t){return t.label})),l.append("span").attr("class","topCommon topSecond");let c=o.selectAll("div").data(t).enter().append("div").attr("draggable","true").on("click",(function(t){d3.selectAll(".LinkPath").attr("stroke-width",1).attr("opacity",.5),d3.select("#"+t.name+"LinkPath").attr("stroke-width",18).attr("opacity",.8),M()(".costNumberView").find(".tbody").find(".tr").css("border-color","#D0CECE"),M()(".costNumberView").find(".tbody").find(".tr").css("background-color","#fff"),M()(this).css("border-color","#5DA5B3"),M()(this).css("background-color","#5DA5B3")})).attr("id",(function(t){return"tr_"+t.name})).attr("class","tr"),d=c.selectAll("div").data((function(t,e){return a.map((function(a){return{col:a,value:t[a],index:e}}))})).enter().append("div").attr("class",(function(){return"td otherCol"})).attr("style","justify-content:center;align-items: center;"),p=d.append("svg").attr("height",18).attr("width",100).attr("viewBox","0 0 100 18").attr("preserveAspectRatio","none");p.append("foreignObject").attr("width",100).attr("height",18).append("xhtml:div").style("text-align",(function(t){return"name"!=t.col?"right":"center"})).style("width","100px").style("height","18px").style("font-size","12px").style("line-height","18px").style("padding-right",(function(t){if("name"!=t.col)return"28px"})).attr("class",(function(t){return"cluster"==t.col?"clusterColor":"name"==t.col?"bankName":"rank"==t.col?"rank_text":void 0})).text((function(t){return"assetSize"==t.col?t.value.toLocaleString():"capitalAdequacyRatio"==t.col||"ctocdRatio"==t.col||"scrapAndConcern"==t.col||"tocdRatio"==t.col||"nonPerformingLoansRatio"==t.col||"concernRate"==t.col||"provisionCoverage"==t.col||"liquidityRatio"==t.col||"assetProfitRatio"==t.col||"ExcessLoanRatio"==t.col||"capitalProfitRatio"==t.col||"costIncomeRatio"==t.col||"singleTenCustomer"==t.col||"topTenCustomer"==t.col||"LoanWeight"==t.col||"depositAbsorptionWeight"==t.col?(100*t.value).toFixed(2)+"%":(t.col,t.value)})).attr("transform",(function(){return"translate(2, 14)"})),d3.select(".costNumberView").selectAll(".topSecond").on("click",(function(){let t=d3.select(this)["_groups"][0][0]["__data__"].name;r.isPageShow?(r.sortParam=t,r.handleSort(t),r.sortAscending=!r.sortAscending):r.sortAscending?(c.sort((function(e,a){return d3.ascending(a[t],e[t])})),r.sortAscending=!r.sortAscending):(c.sort((function(e,a){return d3.ascending(e[t],a[t])})),r.sortAscending=!r.sortAscending)})),r.tableColor(),r.drag(),r.stacked()},tableColor(){let t=M()(".costNumberView").find(".tbody").find(".tr");for(let e=0;e<t.length;e++)M()(".costNumberView").find(".tbody").find(".tr").eq(e).css("border","2px solid #D0CECE")},stackedData(){let t=this,e=Object.keys(this.rankAxisDataTable[0]["weightDim"]),a=document.getElementsByClassName("bankName"),r=[];for(let c=0;c<a.length;c++)r.push(a[c].innerText);let i=[],s=[];r.map(t=>{this.rankAxisDataTable.map(e=>{t==e.name&&i.push(e)})}),i.map(t=>{s.push(t["weightDim"])}),i["columns"]=e;let n=d3.stack().keys(i.columns)(s).map(t=>(t.forEach(e=>e.key=t.key),t));n.map((e,a)=>{e.map((e,i)=>{e["name"]=r[i],e["svgBoxIndex"]=t.svgBoxIndex,e["link"]=a})}),t.svgBoxIndex++;let o=[],l=t.valueWeightData;for(let c in l)o.push({name:c,value:l[c],type:t.fieldSymbol[c]});t.stackedDataFlag&&t.stackedFigureData.splice(0,0,{stackedData:n,dataTable:i,weighData:o})},drag(){var t=document.querySelector(".tbody"),e=null;let a=this;function r(t){var e=0;if(!t||!t.parentNode)return-1;while(t&&(t=t.previousElementSibling))e++;return e}function i(t,e){var a=300;if(a){var r=e.getBoundingClientRect();1===t.nodeType&&(t=t.getBoundingClientRect()),s(e,"transition","none"),s(e,"transform","translate3d("+(t.left-r.left)+"px,"+(t.top-r.top)+"px,0)"),e.offsetWidth,s(e,"transition","all "+a+"ms"),s(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout((function(){s(e,"transition",""),s(e,"transform",""),e.animated=!1}),a)}}function s(t,e,a){var r=t&&t.style;if(r){if(void 0===a)return document.defaultView&&document.defaultView.getComputedStyle?a=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(a=t.currentStyle),void 0===e?a:a[e];e in r||(e="-webkit-"+e),r[e]=a+("string"===typeof a?"":"px")}}t.ondragstart=function(t){t.dataTransfer.setData("te",t.target.innerText),e=t.target},t.ondragover=function(t){t.preventDefault();var a=t.target;if("tr"===a.className&&a!==e){var s=a.getBoundingClientRect(),n=e.getBoundingClientRect();if(a&&a.animated)return;r(e)<r(a)?a.parentNode.insertBefore(e,a.nextSibling):a.parentNode.insertBefore(e,a),i(n,e),i(s,a)}},t.ondragend=function(t){let e=t.target.id.substring(3),r=a.stackedFigureData[0].dataTable.map(t=>t.name),i=document.getElementsByClassName("bankName"),s=[];for(let a=0;a<i.length;a++)s.push(i[a].innerText);let n=r.indexOf(e),o=s.indexOf(e);o>n?d3.select("#tr_"+e+" .bankName").text(e+" ↓"):o<n?d3.select("#tr_"+e+" .bankName").text(e+" ↑"):d3.select("#tr_"+e+" .bankName").text(e),-1==a.dragBankArr.indexOf(e)&&a.dragBankArr.push(e);for(let a=0;a<i.length;a++)M()(".costNumberView").find(".tbody").find(".rank_text").eq(a).text(a+1);a.stackedDataFlag=!1,a.stacked()}},saveProject(){let t=[],e=[],a=document.getElementsByClassName("bankName");for(let r=0;r<a.length;r++)t.push(a[r].innerText.split(" ")[0]);for(let r=0;r<t.length;r++)this.dragBankArr.map(a=>{a==t[r]&&e.push({dragBank:a,newBankIndex:r+1})});this.stackedDataFlag||this.$emit("dragBank",e),this.stackedDataFlag=!0,this.dragBankArr=[]},stacked(){let t=this,{clientWidth:e}=document.getElementById("table"),a={top:20,right:10,bottom:0,left:80},r=.4*(e-a.left-a.right);t.stackedData();let i=t.stackedFigureData[0].dataTable.map(t=>t.name),s=t.stackedFigureData.length,n=50,o=988-a.top-a.bottom+30,l=(Object.keys(this.rankAxisDataTable[0]["weightDim"]),t.fieldColor);d3.select("#svgMain").remove();const c=d3.create("svg").attr("id","svgMain").attr("width",r*s+n*s).attr("height",o+40).style("width",r*s+n*s+"px").style("height",o+40+"px").attr("viewBox",[0,0,r*s+n*s,o+40]);let d=c.append("g").attr("transform","translate(0,40)").attr("class","gLin");t.stackedFigureData.map((e,i)=>{let s=t.stackedFigureData.length,d=d3.scaleLinear().domain([0,d3.max(e.stackedData,t=>d3.max(t,t=>t[1]))]).range([a.left,r-a.right]),p=d3.scaleBand().domain(e.dataTable.map(t=>t.name)).range([a.top,o-a.bottom]).padding(.08),u=t=>t.attr("transform",`translate(${a.left},0)`).call(d3.axisLeft(p).tickSizeOuter(0)).call(d3.axisLeft(p).tickFormat((t,e)=>t+" "+(e+1))).call(t=>t.selectAll(".domain").remove()),h=c.append("g").attr("class","g_"+i).attr("transform",(function(){return 0==i?"translate("+n+",40)":"translate("+((r+n)*i+n)+",40)"})),m=c.append("g").attr("class","g_weight"+i).attr("width",160).attr("height",16).attr("transform",(function(){return 0==i?"translate("+(n+90)+",44)":"translate("+((r+n)*i+n+90)+",44)"})),f=e.weighData;console.log("weighData",f);let g=d3.scaleLinear().domain([0,f.length]).range([0,160]),y=d3.scaleLinear().domain(d3.extent(f,t=>Math.abs(t.value))).range([8,0]),k=d3.scaleLinear().domain(d3.extent(f,t=>Math.abs(t.value))).range([0,8]);console.log("weightX",g.domain(),y.domain(),k.domain()),m.append("line").style("stroke","grey").style("stroke-width","1px").attr("x1",0).attr("y1",8).attr("x2",160).attr("y2",8),console.log("weighData",f),m.selectAll("rect").data(f).enter().append("rect").attr("fill",t=>l(t.name)).attr("stroke","grey").attr("x",(t,e)=>g(e)+1*e).attr("y",(function(t){return t.value>0?y(t.value):0})).attr("height",(function(t){return t.value>0?8-y(t.value):k(t.value)})).attr("width",15),h.append("text").attr("dy",12).attr("dx",10).style("font-size","12px").style("font-weight","light").style("font-weight","bolder").style("cursor","pointer").text((function(){return"Scheme"+(s-i)})).on("click",(function(){console.log("方案"+(s-i))}));let v=h.selectAll("g").data((function(){return e.stackedData})).enter().append("g").attr("fill",t=>l(t.key));v.selectAll("rect").data((function(t){return t})).enter().append("rect").attr("x",(function(t){return d(t[0])})).attr("y",(function(t){return p(t.name)})).attr("width",t=>d(t[1])-d(t[0])).attr("height",p.bandwidth()).attr("class",(function(t){if(t.link==e.stackedData.length-1)return t.name+"linxy"})).style("cursor","pointer").on("click",(function(t){d3.selectAll(".LinkPath").attr("stroke-width",1).attr("opacity",.5),d3.select("#"+t.name+"LinkPath").attr("stroke-width",18).attr("opacity",.8),M()(".costNumberView").find(".tbody").find(".tr").css("border-color","#D0CECE"),M()(".costNumberView").find(".tbody").find(".tr").css("background-color","#fff"),M()("#tr_"+t.name).css("border-color","#5DA5B3"),M()("#tr_"+t.name).css("background-color","#5DA5B3")})).append("title").text((function(e){return`${e.name} ${t.valueWeight[e.key]["label"]}${e.data[e.key]}`})),h.append("g").call(u)}),M()("#svgDiv").css({width:"calc(100% - 800px)"}),M()("#svgBox").css({width:"100%","text-align":"left"}).append(c.node());let p=[];if(t.firstHeiFlag){let e=d3.select(".工商银行linxy")["_groups"]["0"]["0"],a=e.width.animVal.value;t.firstWid=e.x.animVal.value+e.width.animVal.value+a,t.firstHeiFlag=!1}let u=document.getElementsByClassName("bankName"),h=[];for(let m=0;m<u.length;m++)h.push(u[m].innerText);s>1?(i.map(e=>{let a=d3.selectAll("."+e+"linxy"),i=[];a["_groups"].map(a=>{t:for(let s in a){if(!(s<a.length))break t;{let o=a[s].y.animVal.value,l=a[s].width.animVal.value,c=a[s].x.animVal.value+l;if(0==s){let a=h.indexOf(e);i.push({x:0,y:18.8*a+20}),i.push({x:10,y:18.8*a+20}),i.push({x:n,y:o}),i.push({x:t.firstWid+n,y:o})}else s==a.length-1?(i.push({x:(r+n)*s+n,y:o}),i.push({x:c+(r+n)*s,y:o})):(i.push({x:(r+n)*s+n,y:o}),i.push({x:t.firstWid+(r+n)*s+n,y:o}))}}p.push(i)})}),d3.selectAll(".LinkPath").remove(),p.map((t,e)=>{let a=d3.line().x((function(t){return t.x})).y((function(t){return t.y}));d.append("path").attr("d",a(t)).attr("class","LinkPath").attr("id",i[e]+"LinkPath").attr("stroke","#5DA5B3").attr("stroke-width",1).attr("transform","translate(0,10)").attr("opacity",.5).attr("fill","none")})):(i.map(t=>{let e=d3.selectAll("."+t+"linxy"),a=[];e["_groups"].map(e=>{t:for(let r in e){if(!(r<e.length))break t;{let i=e[r].y.animVal.value,s=e[r].width.animVal.value,o=e[r].x.animVal.value+s,l=h.indexOf(t);a.push({x:0,y:18.8*l+20}),a.push({x:10,y:18.8*l+20}),a.push({x:n,y:i}),a.push({x:o,y:i})}}p.push(a)})}),d3.selectAll(".LinkPath").remove(),p.map((t,e)=>{let a=d3.line().x((function(t){return t.x})).y((function(t){return t.y}));d.append("path").attr("d",a(t)).attr("class","LinkPath").attr("id",i[e]+"LinkPath").attr("stroke","#5DA5B3").attr("stroke-width",1).attr("transform","translate(0,10)").attr("opacity",.5).attr("fill","none")}))},deepClone(t){let e=this;if(!t&&"object"!==typeof t)throw new Error("error arguments","deepClone");const a=t.constructor===Array?[]:{};return Object.keys(t).forEach(r=>{t[r]&&"object"===typeof t[r]?a[r]=e.deepClone(t[r]):a[r]=t[r]}),a},initClass(){let{clientWidth:t,clientHeight:e}=document.getElementById("areaDiv");t=570;let a={left:5,right:5,top:10,bottom:10};t=t-a.left-a.right,e=e-a.top-a.bottom;let r=d3.select("#clusterSVGBox").append("svg").attr("width",t+a.left+a.right).attr("height",e+a.left+a.right);this.clusterSVG=r},drawClass(t,e){let a=this,r=this.rankAxisDataTable;d3.select("#clusterSVG").remove(),a.legendArr.map(t=>{t.color=a.fieldColor(t.name)});let{clientWidth:i,clientHeight:s}=document.getElementById("areaDiv");i=560;let n={left:5,right:5,top:10,bottom:28};i=i-n.left-n.right,s=s-n.top-n.bottom,console.log("enter drawClass");let o=this.clusterSVG.append("g").attr("transform","translate("+n.left+","+n.top+")").attr("id","clusterSVG"),l=d3.scaleLinear().range([0,i]),c=d3.scaleLinear().range([s,0]),d=0,p=[];r.map(e=>{let r=a.deepClone(e["weightDim"]),i=0;t.map(t=>{i+=e["weightDim"][t]}),d=Math.max(d,i),r["loc"]=e["loc"],r["rank"]=e["rank"],r["value"]=i,p.push(r)}),l.domain([1,d3.max(p,t=>t.rank)]),console.log("xScale.domain",l.domain()),c.domain([0,d]);let u=d3.stack().keys(t)(p),h=d3.area().x((function(t,e){return l(t.data.rank)})).y0((function(t){return c(t[0])})).y1((function(t){return c(t[1])}));o.selectAll("line_cluster").data(u).enter().append("path").attr("class",(function(t){return"line_cluster "+t.key})).style("fill",(function(t){return a.fieldColor(t.key)})).attr("d",h),o.append("g").attr("class","x axis"),o.select(".x.axis").call(d3.axisBottom(l)).attr("transform","translate(0, "+s+")"),console.log("weightDims",p);let m={};a.rankAxisDataTable.map(t=>{m.hasOwnProperty(t["cluster"])||(m[t["cluster"]]=0),m[t["cluster"]]+=1});let f=[];Object.entries(m).map(t=>{0!=f.length?f.push(f[f.length-1]+t[1]):f.push(t[1])}),f.pop();o.selectAll(".clusterTypeRect").data(f).enter().append("rect").attr("class","clusterTypeRect").attr("x",t=>l(t)).attr("y",0).attr("width",()=>1.5).attr("height",s).style("fill","grey").style("stroke","black").style("opacity",.7).style("stroke-width","0.5px");o.selectAll(".clusterTypeTextXXX").data(f).enter().append("text").attr("class","clusterTypeTextXXX").attr("x",t=>l(t)).attr("y",s+8).style("fill","black").text((function(t){return t})).attr("text-anchor","middle").style("alignment-baseline","middle"),f.push(r.length),o.selectAll(".clusterTypeText").data(f).enter().append("text").attr("class","clusterTypeText").attr("x",(function(t,e){return 0==e?l(t)/2:l((f[e]+f[e-1])/2)})).attr("y",0).style("fill","black").text((function(t,e){return"Rating "+(e+1)})).attr("text-anchor","middle").style("alignment-baseline","middle")},chooseColor(t,e){let a=this.chooseColorArr.indexOf(t);this.legendArr[e].flag=!this.legendArr[e].flag,-1==a?this.chooseColorArr.push(t):this.chooseColorArr.splice(a,1),this.$emit("getChooseColor",this.chooseColorArr)},onPercentChange(t){this.clusterNum=t,console.log("clusterNum: ",this.clusterNum),console.log(this.clusterNum,"滑动条选中数字----，默认为5")}}},Y=J,U=(a("5817"),Object(o["a"])(Y,T,B,!1,null,null,null)),K=U.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"martrixWH",staticClass:"hello",staticStyle:{height:"100%",width:"100%",overflow:"auto"},attrs:{id:"martrixId"}},[t._m(0)])},Z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("aside",{staticStyle:{position:"absolute"}},[a("p",[a("span",[t._v("字段:")]),a("select",{attrs:{id:"order"}},[a("option",{attrs:{value:"name"}},[t._v(" bank ranking data ")]),a("option",{attrs:{value:"count"}},[t._v(" university ranking data ")]),a("option",{attrs:{value:"group"}},[t._v(" by Cluster ")])])])])}],tt={name:"MatrixView",props:{miserables:{type:Object,default:()=>{}}},match:{miserables(t){console.log(t)}},mounted(){this.init(this.miserables)},methods:{init(t){var e={top:40,right:0,bottom:10,left:40},a=1e3,r=1e3,i=d3.scaleBand().rangeRound([0,a]),s=d3.scaleLinear().domain([0,1e3]).clamp(!0),n=d3.scaleOrdinal(d3.schemeCategory10),o=d3.select("#martrixId").append("svg").attr("class","abc").attr("width",a+e.left+e.right).attr("height",r+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"),l=[],c=t.nodes,d=c.length;c.forEach((function(t,e){t.index=e,t.count=0,l[e]=d3.range(d).map((function(t){return{x:t,y:e,z:0}}))})),t.links.forEach((function(t){l[t.source][t.target].z+=t.value,l[t.target][t.source].z+=t.value,l[t.source][t.source].z+=t.value,l[t.target][t.target].z+=t.value,c[t.source].count+=t.value,c[t.target].count+=t.value}));var p={name:d3.range(d).sort((function(t,e){return d3.ascending(c[t].name,c[e].name)})),count:d3.range(d).sort((function(t,e){return c[e].count-c[t].count})),group:d3.range(d).sort((function(t,e){return c[e].group-c[t].group}))};i.domain(p.name),o.append("rect").attr("class","background").attr("width",a).attr("height",r);var u=o.selectAll(".row").data(l).enter().append("g").attr("class","row").attr("transform",(function(t,e){return"translate(0,"+i(e)+")"})).each(m);u.append("line").attr("x2",a),u.append("text").attr("x",-6).attr("y",i.bandwidth()/2).attr("dy",".32em").attr("text-anchor","end").text((function(t,e){return c[e].name}));var h=o.selectAll(".column").data(l).enter().append("g").attr("class","column").attr("transform",(function(t,e){return"translate("+i(e)+")rotate(-90)"}));function m(t){d3.select(this).selectAll(".cell").data(t.filter((function(t){return t.z}))).enter().append("rect").attr("class","cell").attr("x",(function(t){return i(t.x)})).attr("width",i.bandwidth()).attr("height",i.bandwidth()).style("fill-opacity",(function(t){return s(t.z)})).style("fill",(function(t){return c[t.x].group==c[t.y].group?n(c[t.x].group):null})).on("mouseover",f).on("mouseout",g)}function f(t){d3.selectAll(".row text").classed("active",(function(e,a){return a==t.y})),d3.selectAll(".column text").classed("active",(function(e,a){return a==t.x}))}function g(){d3.selectAll("text").classed("active",!1)}function y(t){i.domain(p[t]);let e=d3.transition().duration(1500);e.selectAll(".row").delay((function(t,e){return 4*i(e)})).attr("transform",(function(t,e){return"translate(0,"+i(e)+")"})).selectAll(".cell").delay((function(t){return 4*i(t.x)})).attr("x",(function(t){return i(t.x)})),e.selectAll(".column").delay((function(t,e){return 4*i(e)})).attr("transform",(function(t,e){return"translate("+i(e)+")rotate(-90)"}))}h.append("line").attr("x1",-a),h.append("text").attr("x",6).attr("y",i.bandwidth()/2).attr("dy",".32em").attr("text-anchor","start").text((function(t,e){return c[e].name})),d3.select("#order").on("change",(function(){clearTimeout(k),y(this.value)}));var k=setTimeout((function(){y("group"),d3.select("#order").property("selectedIndex",2).node().focus()}),5e3)}}},et=tt,at=(a("7bdf"),Object(o["a"])(et,Q,Z,!1,null,null,null)),rt=at.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"rankContainer",staticStyle:{"overflow-y":"scroll"},attrs:{id:t.id}},[1==t.rankComIndex?r("img",{staticClass:"rankConImg",attrs:{src:a("5967"),alt:""},on:{click:function(e){return t.rankConClick(0)}}}):t._e(),0==t.rankComIndex?r("img",{staticClass:"rankConImg",attrs:{src:a("b879"),alt:""},on:{click:function(e){return t.rankConClick(1)}}}):t._e()])},st=[],nt={name:"ScatterOfD3",props:{tsneValues:{type:Array,default:()=>[]},nameListData:{type:Array,default:()=>[]},rankData:{type:Array,default:()=>[]},rankAxisData:{type:Array,default:()=>[]},projectAxisData:{type:Array,default:()=>[]},fieldColor:{type:Object,default:()=>{}},chooseColorArr:{type:Array,default:()=>[]}},data(){return{id:"rankContainer",tsneValuesData:[],nameList:[],ranks:[],svg:null,selectedCluster:[],rankComIndex:1,rankAxisG:null,fieldList:null,width:null,rankHeight:null,marginLeft:null,legendHeight:null,projectHeight:null,scoreHeight:null,contributionData:null,svg:null,alignClick:0,selectedName:null,matrixSize:null,linkG:null,nameToColor:null}},computed:{},watch:{tsneValues(t){this.tsneValuesData=t},nameListData(t){this.nameList=t,this.init()},rankData(t){this.ranks=t},rankAxisData(t){console.log("rankAxisData",t)},projectAxisData(t){console.log("projectAxisData",t)},chooseColorArr(t){console.log("RankAxis-----getChooseColor",t),this.updateThemeRiver(t)}},mounted(){console.log("rankAxisData",this.rankAxisData),console.log("projectAxisData",this.projectAxisData)},methods:{init(){console.log("remove"),d3.select("#comSVG").remove();let t=this,e=t.rankAxisData,{clientWidth:a,clientHeight:r}=document.getElementById("rankContainer"),i=d3.select("#rankContainer").append("svg").attr("id","comSVG").attr("width",a).attr("height",r).style("overflow-y","scroll"),s={top:5,right:10,bottom:5,left:130},n=a-s.left-s.right,o=0,l=40,c=30,d=40;i.append("g").attr("transform","translate("+s.left+",0)");let p=[{x1:0,y1:o+d+10,x2:a,y2:o+d+10},{x1:0,y1:s.top+o+d+c+20,x2:a,y2:s.top+o+d+c+20},{x1:0,y1:s.top+o+d+c+l+30,x2:a,y2:s.top+o+d+c+l+30}];i.attr("class","line").selectAll("line").data(p).enter().append("line").style("stroke","black").style("stroke-width","0.2px").style("stroke-dasharray","3, 3").attr("x1",t=>t.x1).attr("y1",t=>t.y1).attr("x2",t=>t.x2).attr("y2",t=>t.y2);let u=Object.keys(e[0]["weightDim"]),h=i.append("g").attr("transform","translate(0,0)").attr("class","linkG"),m=i.append("g").attr("transform","translate("+s.left+","+(o+5)+")").attr("class","projectAxisG"),f=i.append("g").attr("transform","translate("+s.left+","+(o+d+15)+")").attr("class","scoreAxisG"),g=(f.append("g").attr("transform","translate(0,"+c/2+")").attr("class","scoreAxisMidG"),i.append("g").attr("transform","translate("+s.left+","+(o+d+c+25)+")").attr("class","rankAxisG")),y=i.append("g").attr("transform","translate("+s.left+","+(o+d+c+l+35)+")").attr("class","matrixWSG");this.rankAxisG=g,this.fieldList=u,this.width=n,this.rankHeight=l,this.marginLeft=s.left,this.projectHeight=d,this.scoreHeight=c,this.svg=i,m.append("text").attr("x",-5).attr("y",5+d/2).style("fill","black").text("Projection Axis").attr("text-anchor","end").style("alignment-baseline","middle"),y.append("text").attr("x",-5).attr("y",5).style("fill","black").text("Attribute Comparison View").attr("text-anchor","end").style("alignment-baseline","middle"),f.append("text").attr("x",-5).attr("y",5+c/2).style("fill","black").text("Score Axis").attr("text-anchor","end").style("alignment-baseline","middle"),t.updateScore(e,f,n,c),t.updateThemeRiver(u);let v=t.projectAxisData;m.append("g").attr("class","x axis"),m.append("g").attr("class","y axis");let x=d3.scaleLinear().range([0,n]),R=d3.scaleLinear().range([d,0]),b=[];v.map(t=>{"project_point"==t["type"]&&b.push(t["inverse"])});let D=d3.interpolateHsl("white","#2c7bb6"),w=d3.interpolateHsl("white","#d7191c"),A={};function P(e){x.domain([d3.min(e,t=>t.loc),d3.max(e,t=>t.loc)]),R.domain([0,d3.max(e,t=>t.verDist)]);let a=m.selectAll(".projectRect").data(e),r=[],i=[];e.map(t=>{"poly_point"==t["type"]?r.push(t):i.push(t)});let s=Object(k["a"])().attr("class","d3-tip").offset([-10,0]).html((function(t){return"poly_point"==t.type?"Polyline Point<br>Cluster: "+t.cluster:"Project Point<br>Name: "+t.name+"<br>Rank: "+t.rank+"<br>Rating: "+(t.cluster+1)+"<br>Inverse: "+t.inverse}));console.log("projectItemName",s),m.call(s);let n=m.selectAll(".projectCircle").data(e);n.enter().append("circle").attr("class","projectCircle").merge(n).attr("id",t=>t.name+"_projectCircle").attr("r",t=>"poly_point"==t.type?3:4).attr("cx",t=>x(t.loc)).attr("cy",t=>R(t.verDist)).style("fill",t=>t.color).style("stroke","black").on("mouseover",(function(t){s.show(t,this),d3.select(this).attr("stroke-width","2px").attr("cursor","pointer"),d3.select("#"+t.name+"_linkPath").attr("opacity",1).attr("stroke-width",3.5).attr("stroke",t.color)})).on("mouseout",(function(t){s.hide(),t.click||(console.log("enter mouseout",t.click),d3.select(this).attr("stroke-width","0.5px").attr("cursor","default"),d3.select("#"+t.name+"_linkPath").attr("opacity",.2).attr("stroke-width",1))})).attr("click",0).on("click",(function(e){t.switchColor(e.name),t.selectedName=e.name,d3.selectAll(".projectCircle").attr("stroke-width","0.5px").attr("cursor","default"),d3.selectAll(".linkPath").attr("opacity",.2).attr("stroke-width",1),e.click?(console.log("display"),d3.select(this).attr("stroke-width","0.5px").attr("cursor","default"),d3.select("#"+e.name+"_linkPath").attr("opacity",.2).attr("stroke-width",1)):(d3.select(this).attr("stroke-width","2px").attr("cursor","pointer"),d3.select("#"+e.name+"_linkPath").attr("opacity",1).attr("stroke-width",3).attr("stroke",e.color)),e.click=!e.click,console.log(e.click)})),n.exit().remove(),console.log("poly_point_data",r),a.exit().remove(),m.select(".x.axis").call(d3.axisBottom(x).tickSize(0).tickValues([])).attr("transform","translate(0, "+d+")")}v.map(t=>{if(t.click=!1,"poly_point"==t.type)return"grey";t.inverse<0?t["color"]=w(t.inverse/d3.min(b)):t.inverse>0?t["color"]=D(t.inverse/d3.max(b)):t["color"]="grey",A[t.name]=t.color}),P(v);this.nameList;let C=n/(e.length-1);this.matrixSize=C;let _={};e.map((t,e)=>{_[t.name]={},Object.keys(t["weightDim"]).map(e=>{_[t.name][e]=t["weightDim"][e]})}),this.nameToColor=A,this.linkG=h,this.contributionData=_,this.updateMatrix(y,e,u,n,C,!1),this.updatePath()},updatePath(){let t=this,e=this.marginLeft,a=this.projectHeight,r=this.rankHeight,i=this.scoreHeight,s=(this.nameListData,this.contributionData,this.rankAxisData,this.fieldList),n=this.matrixSize,o=this.projectAxisData,l=this.linkG,c=this.nameToColor;l.selectAll(".linkPath").remove(),console.log("enter updatePath");let d=d3.line().x((function(t){return t.x})).y((function(t){return t.y})).curve(d3.curveMonotoneX);o.map(o=>{if("project_point"==o["type"]){let t=o.name,p=d3.select("#"+t+"_projectCircle"),u=d3.select("#"+t+"_rankRect"),h=d3.select("."+t+"_matrixRect"),m=[{x:e+parseFloat(p.attr("cx")),y:5+parseFloat(p.attr("cy"))},{x:e+parseFloat(u.attr("x"))+1,y:a+15+parseFloat(u.attr("y"))},{x:e+parseFloat(u.attr("x"))+1,y:a+i+25},{x:e+parseFloat(u.attr("x"))+1,y:a+i+r+25},{x:e+parseFloat(h.attr("x"))+1,y:a+i+r+50},{x:e+parseFloat(h.attr("x"))+1,y:a+r+45+s.length*(n+3)}];l.append("path").attr("d",d(m)).attr("class","linkPath").attr("id",t+"_linkPath").attr("stroke",c[t]).attr("stroke-width",1).attr("opacity",.2).attr("fill","none")}d3.select("#"+t.selectedName+"_linkPath").style("opacity",1).style("stroke-width",3)})},switchColor(t){console.log("switchColor");let e=this,a=[],r=this.nameListData,i=this.fieldList,s=this.contributionData,n=e.deepClone(e.rankAxisData);console.log("switchColor",s,n);d3.interpolateHsl("white","steelblue");r.map(e=>{let r=0;i.map(i=>{let n=s[e][i],o=s[t][i];a.push(Math.abs(o-n)),r+=Math.pow(o-n,2)}),s[e]["name"]=e,s[e]["dist"]=Math.sqrt(r)});let o=[];for(let d in s)o.push(s[d]);o.sort((function(t,e){return t.dist-e.dist})),console.log("contributionDataList",o);let l=d3.interpolateHsl("white","#2c7bb6"),c=d3.interpolateHsl("white","#d7191c");r.map(e=>{i.map(r=>{let i=s[e][r],n=s[t][r],o=i-n,d=null;d=o<=0?c(-o/d3.max(a)):l(o/d3.max(a)),d3.select("#"+e+"_"+r+"_Rect").transition().duration(1500).style("fill",d)})})},alignData(){console.log("switchColor");let t=this,e=[],a=this.nameListData,r=this.fieldList,i=this.contributionData,s=t.deepClone(t.rankAxisData),n=this.selectedName;if(console.log("alignClick",this.alignClick),this.alignClick%2==0){a.map(t=>{let a=0;r.map(r=>{let s=i[t][r],o=i[n][r];e.push(Math.abs(o-s)),a+=Math.pow(o-s,2)}),i[t]["name"]=t,i[t]["dist"]=Math.sqrt(a)});let s=[];for(let t in i)s.push(i[t]);s.sort((function(t,e){return t.dist-e.dist})),s.map((e,a)=>{r.map(r=>{d3.select("#"+e["name"]+"_"+r+"_Rect").transition().duration(1500).attr("x",a*t.matrixSize)});let i=d3.select("."+e["name"]+"_text").attr("transform").split(",")[1],s="translate("+a*t.matrixSize+","+i;d3.select("."+e["name"]+"_text").transition().duration(1500).attr("transform",s)})}else s.map((e,a)=>{r.map(r=>{d3.select("#"+e["name"]+"_"+r+"_Rect").transition().duration(1500).attr("x",a*t.matrixSize)});let i=d3.select("."+e["name"]+"_text").attr("transform").split(",")[1],s="translate("+a*t.matrixSize+","+i;d3.select("."+e["name"]+"_text").transition().duration(1500).attr("transform",s)});this.alignClick+=1},updateMatrix(t,e,a,r,i,s){let n=[];e.sort((function(t,e){return t.rank-e.rank})),e.map(t=>{n.push(t["name"])});this.contributionData;e.map((e,a)=>{let r=[];Object.keys(e["weightDim"]).map(t=>{r.push({field:t,contribution:e["weightDim"][t]})});t.selectAll(".matrixRect").data(r).enter().append("rect").attr("class",t=>e.name+"_matrixRect").attr("id",t=>e.name+"_"+t.field+"_Rect").attr("x",a*i).attr("y",(t,e)=>15+e*(i+3)).attr("width",3).attr("height",i).style("fill","#dedbdb").style("stroke","grey").style("stroke-width","0.1px")}),t.selectAll("comField").data(a).enter().append("text").attr("class","comField").attr("x",-2).attr("y",(t,e)=>15+i/2+e*(i+3)).text((function(t){return t})).attr("text-anchor","end").style("alignment-baseline","middle"),t.selectAll("comName").data(n).enter().append("text").attr("class",t=>"comName "+t+"_text").text((function(t){return t})).attr("text-anchor","end").style("alignment-baseline","middle").style("font-size","8px").attr("transform",(function(t,e){let r=e*i,s=15+a.length*(i+3);return"translate("+r+","+s+") rotate("+"-40)"}))},updateScore(t,e,a,r){console.log("aa",this.aa),e.append("g").attr("class","x axis"),e.append("g").attr("class","y axis");let i=d3.scaleLinear().domain([1,d3.max(t,t=>t.rank)]).range([0,a]),s=d3.scaleLinear().domain([0,d3.max(t,t=>t.score)]).range([r,0]);var n=d3.area().x((function(t){return i(t.rank)})).y0(r).y1((function(t){return s(t.score)})),o=d3.line().x((function(t){return i(t.rank)})).y((function(t){return s(t.score)}));e.append("path").data([t]).attr("class","area").attr("d",n).attr("fill","#d6d0d0"),e.append("path").data([t]).attr("class","line").attr("d",o).attr("fill","none").attr("stroke","grey");let l=Object(k["a"])().attr("class","d3-tip").offset([-10,0]).html((function(t){return"Name: "+t.name+"<br>Score: "+t.score.toFixed(2)+"<br>Rank: "+t.rank}));e.call(l),t.map(t=>{t["click"]=!1});let c=e.selectAll(".rankRect").data(t);c.enter().append("rect").attr("class","rankRect").merge(c).attr("id",t=>t.name+"_rankRect").attr("x",t=>i(t.rank)).attr("y",t=>s(t.score)).attr("width",()=>2.5).attr("height",t=>r-s(t.score)).style("fill","grey").style("stroke","black").style("opacity",.6).style("stroke-width","0.5px").on("mouseover",(function(t){console.log("rect mouseover"),l.show(t,this),console.log(d3.select(this)),d3.select(this).style("stroke-width","2px").style("cursor","pointer"),d3.select("#"+t.name+"_linkPath").style("opacity",1).style("stroke-width",3.5).style("stroke",t.color)})).on("mouseout",(function(t){l.hide(),t.click||(console.log("enter mouseout",t.click),d3.select(this).style("stroke-width","0.5px").style("cursor","default"),d3.select("#"+t.name+"_linkPath").style("opacity",.2).style("stroke-width",1))})).on("click",(function(t){self.switchColor(t.name),self.selectedName=t.name,d3.selectAll(".rankRect").style("stroke-width","0.5px").style("cursor","default"),d3.selectAll(".linkPath").style("opacity",.2).style("stroke-width",1),t.click?(d3.select(this).style("stroke-width","0.5px").style("cursor","default"),d3.select("#"+t.name+"_linkPath").style("opacity",.2).style("stroke-width",1)):(d3.select(this).style("stroke-width","2px").style("cursor","pointer"),d3.select("#"+t.name+"_linkPath").style("opacity",1).style("stroke-width",3).style("stroke",t.color)),t.click=!t.click,console.log(t.click)})),c.exit().remove()},updateThemeRiver(t){let e=this.rankAxisData,a=this.width,r=this.rankHeight,i=this.svg,s=this.marginLeft,n=this.projectHeight,o=this.scoreHeight;d3.select(".rankAxisG").remove();let l=i.append("g").attr("transform","translate("+s+","+(n+o+25)+")").attr("class","rankAxisG");l.append("text").attr("x",-5).attr("y",5+r/2).style("fill","black").text("Contribution Axis").attr("text-anchor","end").style("alignment-baseline","middle"),console.log("aaa",e,l,this.width,r);let c=this;l.append("g").attr("class","x axis"),l.append("g").attr("class","y axis");let d=d3.stack().keys(t).offset(d3.stackOffsetWiggle),p=[];e.map(t=>{let e=c.deepClone(t["weightDim"]);e["rank"]=t["rank"],p.push(e)});let u=d(p),h=d3.scaleLinear().domain([1,d3.max(p,t=>t.rank)]).range([0,a]),m=(d3.scaleLinear().domain([0,d3.max(e,t=>t.score)]).range([r,0]),d3.scaleLinear().domain([d3.min(u,(function(t){return d3.min(t,(function(t){return t[0]}))})),d3.max(u,(function(t){return d3.max(t,(function(t){return t[1]}))}))]).range([r,0]));console.log(222,h.domain(),m.domain());d3.scaleLinear().range(["#aad","#556"]);let f=d3.area().x((function(t){return h(t.data.rank)})).y0((function(t){return m(t[0])})).y1((function(t){return m(t[1])}));l.selectAll("path").data(u).enter().append("path").attr("d",f).style("fill",(function(e,a){return c.fieldColor(t[a])}));let g=Object(k["a"])().attr("class","d3-tip").offset([-10,0]).html((function(t){return"Name: "+t.name+"<br>Score: "+t.score.toFixed(2)+"<br>Rank: "+t.rank}));l.call(g),e.map(t=>{t["click"]=!1});let y=l.selectAll(".rankRect").data(e);y.enter().append("rect").attr("class","rankRect").merge(y).attr("id",t=>t.name+"_rankRect").attr("x",t=>h(t.rank)).attr("y",0).attr("width",t=>1).attr("height",r).style("fill","grey").style("opacity",0).on("mouseover",(function(t){console.log("rect mouseover"),g.show(t,this),console.log(d3.select(this)),d3.select(this).style("stroke-width","2px").style("cursor","pointer"),d3.select("#"+t.name+"_linkPath").style("opacity",1).style("stroke-width",3.5).style("stroke",t.color)})).on("mouseout",(function(t){g.hide(),t.click||(console.log("enter mouseout",t.click),d3.select(this).style("stroke-width","0.5px").style("cursor","default"),d3.select("#"+t.name+"_linkPath").style("opacity",.2).style("stroke-width",1))})).on("click",(function(t){c.switchColor(t.name),c.selectedName=t.name,d3.selectAll(".rankRect").style("stroke-width","0.5px").style("cursor","default"),d3.selectAll(".linkPath").style("opacity",.2).style("stroke-width",1),t.click?(d3.select(this).style("stroke-width","0.5px").style("cursor","default"),d3.select("#"+t.name+"_linkPath").style("opacity",.2).style("stroke-width",1)):(d3.select(this).style("stroke-width","2px").style("cursor","pointer"),d3.select("#"+t.name+"_linkPath").style("opacity",1).style("stroke-width",3).style("stroke",t.color)),t.click=!t.click,console.log(t.click)})),y.exit().remove()},deepClone(t){let e=this;if(!t&&"object"!==typeof t)throw new Error("error arguments","deepClone");const a=t.constructor===Array?[]:{};return Object.keys(t).forEach(r=>{t[r]&&"object"===typeof t[r]?a[r]=e.deepClone(t[r]):a[r]=t[r]}),a},rankConClick(t){console.log("rankConClick-----"),this.rankComIndex=t;let e=this;this.alignData(),setTimeout((function(){e.updatePath()}),1500)}}},ot=nt,lt=(a("4b315"),Object(o["a"])(ot,it,st,!1,null,null,null)),ct=lt.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"svg-container",attrs:{id:"scatterLink"}})},pt=[];let ut=v;var ht={name:"ScatterLink",props:{tsneArrays:{type:Array,default:()=>[]},rankAxisDataArrays:{type:Array,default:()=>[]},nameListData:{type:Array,default:()=>[]}},data(){return{id:"scatterLink",tsneArraysData:[],nameList:[],svg:null,selectedCluster:[],targetList:[],scaleArray:[],blockWidth:0,lineObjects:{}}},computed:{},watch:{tsneArrays(t){this.tsneArraysData=t,this.init()},rankAxisDataArrays(t){console.log("rankAxisDataArrays",t)},nameListData(t){this.nameList=t}},mounted(){},methods:{init(){d3.select("#svgscatterLink").remove();let t=this,{clientWidth:e,clientHeight:a}=document.getElementById("scatterLink"),r=.28*e;this.blockWidth=r;let i={left:25,right:25,top:20,bottom:20};this.svg=d3.select("#"+this.id).append("svg").attr("width",e).attr("height",a).attr("id","svg"+this.id);let s=[],n={};d3.scaleLinear().range([0,5]).domain([0,100]),d3.interpolateHsl("white","red");for(let o=0;o<this.tsneArrays.length;o++){let e={};t.rankAxisDataArrays[o].map((t,a)=>{e[t["name"]]={},e[t["name"]]["name"]=t["name"],e[t["name"]]["score"]=t["score"],e[t["name"]]["weightDim"]=t["weightDim"]}),console.log("radarData",e),this.svg.append("rect").attr("x",i.left-15).attr("width",r).attr("y",i.top/2).attr("height",a).attr("fill","transparent").attr("stroke","transparent").attr("stroke-width","2px").attr("pointer-events","none").attr("transform","translate("+r*o+",0 )");let l=0;l=0==o?r*o:(r+40)*o;let c=this.svg.append("g").attr("width",r).attr("height",a).attr("id","tsne_g_"+o).attr("transform","translate("+l+",0 )");c.append("text").text(()=>"Scheme"+(t.rankAxisDataArrays.length-o)).style("font-size","12px").style("font-weight","bolder").attr("transform","translate("+i.right+",16 )"),this.svg.append("line").style("stroke","grey").style("stroke-width","1px").attr("x1",(r+40)*(o+1)).attr("y1",20).attr("x2",(r+40)*(o+1)).attr("y2",a-20).style("stroke-width","0.2px").style("stroke-dasharray","3, 3");let d=this.tsneArrays[o];this.targetList.push(c);let p=[],u=[];d.forEach((t,e)=>{let[a,r]=t;p.push(a),u.push(r);let i=this.nameListData[e];n.hasOwnProperty(i)||(n[i]=[]),n[i].push([a,r])});let h=d3.scaleLinear().range([i.left-5,r-i.right]).domain([d3.min(p),d3.max(p)]),m=d3.scaleLinear().range([a-i.bottom,i.top]).domain([d3.min(u),d3.max(u)]);s.push([h,m]);let f=c.selectAll("g").data(d).enter().append("g").attr("class","u").attr("title",(t,e)=>this.nameListData[e]),g=Object(k["a"])().attr("class","d3-tip").offset([-10,0]).html((function(t){return t}));f.call(g);let y=d3.scaleLinear().range([0,8]).domain([0,100]);d3.interpolateHsl("white","red");f.append("circle").attr("r",5).attr("fill","#D0CECE").attr("cx",t=>h(t[0])).attr("cy",t=>m(t[1])).attr("stroke","black").attr("r",(t,a)=>y(e[this.nameListData[a]]["score"])).attr("fill",(t,e)=>"#d6d0d0").attr("class",(t,e)=>this.nameListData[e]+" uItem").attr("title",(t,e)=>this.nameListData[e]).on("mouseover",(function(e,a){g.show(t.nameListData[a],this),d3.select(this).attr("r",7).attr("stroke-width","2px").attr("cursor","pointer")})).on("mouseout",(function(){g.hide(),d3.select(this).attr("r",5).attr("stroke-width","1px").attr("cursor","default")})),f.append("text").attr("x",t=>h(t[0])).attr("y",t=>m(t[1])).attr("dx",10).attr("dy",5).style("font-size","6px").style("font-weight","light").style("fill","grey").text((t,e)=>this.nameListData[e])}this.lassoDraw(this.svg),this.lineObjects=n,this.scaleArray=s},lassoDraw(t){let e,a,r=this,i=t.selectAll(".uItem"),s=ut.lasso();s.closePathSelect(!0).closePathDistance(100).items(i).targetArea(t).on("start",(function(){s.items().classed("not_possible",!0).classed("selected",!1)})).on("draw",(function(){s.possibleItems().classed("not_possible",!1).classed("possible",!0),s.notPossibleItems().classed("not_possible",!0).classed("possible",!1),e=d3.select(".drawn").attr("d"),a=d3.select(".loop_close").attr("d")})).on("end",(function(){d3.selectAll(".diy-path").remove(),s.items().classed("not_possible",!1).classed("possible",!1),s.selectedItems().classed("selected",!0).each((function(){d3.select(this).select("circle").attr("stroke-width","2px")}));let i=[];if(s.selectedItems().each((function(){i.push(d3.select(this).attr("title"))})),i.length>0){i.map((function(t){d3.selectAll(".u").select("."+t).attr("stroke-width","2px")}));let t={};for(let e of Object.keys(r.lineObjects))i.includes(e)&&(t[e]=r.lineObjects[e]);r.drawLines(t)}else d3.selectAll(".u").select("circle").attr("stroke-width","1px");e&&a?i.length>0&&r.selectedCluster.push({drawnPath:e,loopClosePath:a,selectedIDs:i}):r.selectedCluster=[],e="",a="",r.$emit("lassoData",i),s.notSelectedItems().each((function(){d3.select(this).select("circle").attr("r",5).attr("stroke-width","1px")})),r.lassoCrossed(t)})),t.call(s)},drawLines(t){d3.selectAll(".diy-path").remove();let e=this,a=d3.line().x((t,a)=>e.scaleArray[a][0](t[0])+(e.blockWidth+40)*a).y((t,a)=>e.scaleArray[a][1](t[1]));for(let[r,i]of Object.entries(t))this.svg.append("path").attr("d",a(i)).attr("stroke","#5DA5B3").attr("stroke-width","2px").attr("fill","none").attr("class","diy-path "+r).style("marker-end","url(#triangle)")},lassoCrossed(t){t.selectAll(".clusterDrawn").remove(),t.selectAll(".clusterClose").remove(),t.selectAll(".selectedCluster").remove(),t.selectAll(".selectedCluster").data(this.selectedCluster).enter().append("g").attr("class","selectedCluster");let e=t.selectAll(".selectedCluster");e.append("path").attr("class","clusterDrawn").attr("d",(function(t){return t.drawnPath})),e.append("path").attr("class","clusterClose").attr("d",t=>t.loopClosePath)}}},mt=ht,ft=(a("62f4"),Object(o["a"])(mt,dt,pt,!1,null,null,null)),gt=ft.exports,yt=a("9654"),kt=a("ec78");window.svmjs=a("6c0c");var vt={name:"Home",components:{ScatterOfD3:D,ScatterOfD3Two:L,ScatterOfD3Three:I,TableView:K,MatrixView:rt,RankAxisProject:ct,ScatterLink:gt},data(){return{msg:"Home page data",valueDirections:{assetSize:!0,capitalAdequacyRatio:!0,tocdRatio:!0,ctocdRatio:!0,nonPerformingLoansRatio:!1,concernRate:!1,provisionCoverage:!0,liquidityRatio:!0,assetProfitRatio:!0,capitalProfitRatio:!0,costIncomeRatio:!1,singleTenCustomer:!1,topTenCustomer:!1},tableData:[],tsneValues:[],tsneArrays:[],rankAxisDataArrays:[],nameListData:[],rankData:[],fieldList:[],fieldColor:{},fieldSymbol:{},projectAxisData:[],rankAxisData:[],rankAxisDataTable:[],miserables:{},scatterIndex:2,martrixShow:!1,testShow:!1,initialize:!0,valueWeight:{assetSize:.35,capitalAdequacyRatio:.15,nonPerformingLoansRatio:.1,concernRate:.05,provisionCoverage:.15,liquidityRatio:.1,assetProfitRatio:.05,capitalProfitRatio:.05},chooseColorArr:[]}},computed:{},mounted(){this.init()},watch:{valueWeight(t){console.log("tsne update",t)}},methods:{init(){let t=this,e={},a=[],r=[];yt.forEach(i=>{for(let a in i)-1!=Object.keys(t.valueWeight).indexOf(a)&&(e[a]=i[a]);a.push(i.name),r.push(Object.values(e).map(t=>Number.parseFloat(t)||0))}),this.fieldList=Object.keys(yt[0]),this.fieldList.splice(this.fieldList.indexOf("name"),1),this.fieldColor=d3.scaleOrdinal().domain(this.fieldList).range(["#009292","#ff6db6","#ffb6db","#490092","#006ddb","#b66dff","#6db6ff","#b6dbff"]);let i={};this.fieldList.map(t=>{i[t]=!0}),this.fieldSymbol||(this.fieldSymbol=i),this.nameListData=a;let s=t.getWeightData(r,this.fieldList),[n,o]=this.getRank(s,r,a,this.fieldList);n=this.getCluster(n),this.rankAxisData=n,console.log("rankAxisData123",n),t.rankAxisDataArrays.unshift(n),this.rankAxisDataTable=this.deepClone(n),this.tableData=this.deepClone(yt),o.map((t,e)=>{this.tableData[e]["rank"]=t}),this.tsneValues=t.getTsneData(s),console.log("tsneValues",this.tsneValues),this.tsneArrays.push(this.tsneValues),this.rankData=o,this.testShow=!0;let[l,c]=t.getPatternTwo(t.tsneValues,o,a);console.log("clusterIDs",l),console.log("axisData two",c),t.projectAxisData=t.getRankAxis(c,t.tsneValues,a,o,l),t.initialize=!1},getSampleIDs(t,e){if(t>3&&t<e-3)return[t-3,t-2,t-1,t+1,t+2,t+3];if(t<=3){let e=[];for(let a=1;a<t;a++)e.push(a);for(let a=t+1;a<t+6-e.length;a++)e.push(a);return e}if(t>e-3){let a=[];for(let r=t+1;r<e;r++)a.push(r);for(let e=t-(6-a.length);e<t;e++)a.push(e);return a}},getSVMWeight(t,e){let a=this,r={},i={},s=t.length,n=[];t.map(t=>{r[t["rank"]]=t,i[t["name"]]=t,n=Object.keys(t["weightDim"])});let o=[],l=[];var c;e.map(t=>{let e=a.getSampleIDs(t["newBankIndex"],s),n=i[t["dragBank"]]["weightDim"];console.log(e),e.map(e=>{let a=r[e]["weightDim"],i=[];for(let t in n)i.push(n[t]-a[t]);o.push(i),e<t["newBankIndex"]?l.push(-1):l.push(1)})});var d=new svmjs.SVM,p=1;d.train(o,l,{kernel:"linear",C:p}),c=d.getWeights();let u=[],h={};return n.map((t,e)=>{c["w"][e]<0?u[t]=.001:u[t]=Math.abs(c["w"][e]),c["w"][e]>=0?h[t]=!0:h[t]=!1}),this.fieldSymbol=h,console.log("fieldSymbol",h),u},getCluster(t){if(this.initialize)t.map(t=>{let e=t["rank"];t["cluster"]=e<5?1:e<12?2:e<18?3:e<28?4:e<34?5:e<39?6:7});else{let e=[];t.map(t=>{console.log("ans",t),e.push([t["score"]])});let a=Object(kt["a"])(e,7)["clusters"],r=[];a.map(t=>{-1==r.indexOf(t)&&r.push(t)}),t.map((t,e)=>{t["cluster"]=r.indexOf(a[e])+1,console.log(t["cluster"])})}return t},getPatternTwo(t,e){let a={1:[],2:[],3:[],4:[],5:[]},r=[];for(let s=0;s<e.length;s++)e[s]<4?(a[1].push(t[s]),r.push(1)):e[s]<11?(a[2].push(t[s]),r.push(2)):e[s]<27?(a[3].push(t[s]),r.push(3)):e[s]<33?(a[4].push(t[s]),r.push(4)):(a[5].push(t[s]),r.push(5));let i=[];return Object.keys(a).map(t=>{let e=0,r=0;a[t].map(t=>{e+=t[0],r+=t[1]}),i.push([e/a[t].length,r/a[t].length])}),[r,i]},getPatternOne(t,e,a){let r=[];for(let i=0;i<t.length;i++)r.push({item:t[i],rank:e[i],name:a[i]});return r.sort((function(t,e){return t.rank-e.rank})),r.map((function(t){return t["item"]}))},getRankAxis(t,e,a,r,i){if(this.initialize)return[{loc:0,type:"poly_point",verDist:0,cluster:1,click:!1},{loc:4.557388990385519,type:"poly_point",verDist:0,cluster:2,click:!1},{loc:7.0425125928761565,type:"poly_point",verDist:0,cluster:3,click:!1},{loc:8.440762529810696,type:"poly_point",verDist:0,cluster:4,click:!1},{loc:9.867266452033434,type:"poly_point",verDist:0,cluster:5,click:!1},{loc:-.23540973827477057,verDist:.3464450359627634,name:"工商银行",rank:1,type:"project_point",cluster:1,inverse:0,click:!1,color:"grey"},{loc:-.08154890456266517,verDist:.3087649383844606,name:"建设银行",rank:2,type:"project_point",cluster:1,inverse:0,click:!1,color:"grey"},{loc:.31695864283743386,verDist:.037680097578302714,name:"农业银行",rank:3,type:"project_point",cluster:1,inverse:0,click:!1,color:"grey"},{loc:.501425193844829,verDist:.28670372272323474,name:"中国银行",rank:4,type:"project_point",cluster:2,inverse:0,click:!1,color:"grey"},{loc:6.312963456339368,verDist:.6001585698838147,name:"交通银行",rank:8,type:"project_point",cluster:2,inverse:0,click:!1,color:"grey"},{loc:5.854606721427332,verDist:.4562860501652048,name:"邮储银行",rank:6,type:"project_point",cluster:2,inverse:0,click:!1,color:"grey"},{loc:6.16116792001589,verDist:.435486454945833,name:"招商银行",rank:7,type:"project_point",cluster:2,inverse:0,click:!1,color:"grey"},{loc:6.732687045045864,verDist:.32006427746055777,name:"兴业银行",rank:10,type:"project_point",cluster:2,inverse:0,click:!1,color:"grey"},{loc:7.3960250334206235,verDist:.3650863315500607,name:"浦发银行",rank:12,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:7.1578940578679475,verDist:.8989694145828876,name:"中信银行",rank:13,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:7.199400733485544,verDist:1.91155309002923,name:"光大银行",rank:15,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:7.765640280463248,verDist:1.7331412224070892,name:"北京银行",rank:22,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:7.579805585086488,verDist:.9292398949260676,name:"民生银行",rank:14,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:5.60723760776358,verDist:.8123601553873904,name:"浙商银行",rank:19,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:2.6317873268150525,verDist:.7757481701519413,name:"南京银行",rank:11,type:"project_point",cluster:3,inverse:1,click:!1,color:"rgb(44, 162, 95)"},{loc:5.11948917937207,verDist:.40137918414815277,name:"宁波银行",rank:9,type:"project_point",cluster:2,inverse:0,click:!1,color:"grey"},{loc:6.276390548254442,verDist:1.0619302783491584,name:"徽商银行",rank:23,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:6.542029017168445,verDist:.9347414311028212,name:"重庆农商",rank:17,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:4.262842374623441,verDist:.08443786420825353,name:"北京农商",rank:5,type:"project_point",cluster:2,inverse:0,click:!1,color:"grey"},{loc:8.035659289632408,verDist:2.7708313351810507,name:"贵阳银行",rank:18,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:8.389342283809459,verDist:2.896075787889759,name:"成都银行",rank:25,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:7.8319573945894145,verDist:2.628207733358201,name:"江苏苏州农商",rank:34,type:"project_point",cluster:5,inverse:1,click:!1,color:"rgb(44, 162, 95)"},{loc:1.7691996698720946,verDist:2.037398752234605,name:"江苏昆山农商",rank:21,type:"project_point",cluster:3,inverse:1,click:!1,color:"rgb(44, 162, 95)"},{loc:7.645025811466418,verDist:.8580622643394819,name:"嘉兴银行",rank:24,type:"project_point",cluster:3,inverse:0,click:!1,color:"grey"},{loc:7.285581535350622,verDist:2.955301703217203,name:"平安银行",rank:29,type:"project_point",cluster:4,inverse:0,click:!1,color:"grey"},{loc:7.671134701231624,verDist:2.3586850800259374,name:"华夏银行",rank:35,type:"project_point",cluster:5,inverse:1,click:!1,color:"rgb(44, 162, 95)"},{loc:8.837041162794609,verDist:1.9794679252976568,name:"广发银行",rank:31,type:"project_point",cluster:4,inverse:0,click:!1,color:"grey"},{loc:9.189804043650742,verDist:.4242798242317329,name:"渤海银行",rank:42,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:8.952894227170503,verDist:.21732024261774732,name:"杭州银行",rank:30,type:"project_point",cluster:4,inverse:0,click:!1,color:"grey"},{loc:9.012311279365063,verDist:.33517574501354047,name:"广州农商",rank:20,type:"project_point",cluster:3,inverse:-1,click:!1,color:"rgb(255, 128, 128)"},{loc:8.491384467694026,verDist:1.4641163901988115,name:"长沙银行",rank:28,type:"project_point",cluster:4,inverse:0,click:!1,color:"grey"},{loc:9.154731003103596,verDist:.6614354991409716,name:"重庆银行",rank:27,type:"project_point",cluster:4,inverse:0,click:!1,color:"grey"},{loc:9.355148312757432,verDist:.08533932756161783,name:"深圳农商",rank:26,type:"project_point",cluster:3,inverse:-1,click:!1,color:"rgb(255, 128, 128)"},{loc:9.463220535519842,verDist:.4608173211225752,name:"东莞银行",rank:33,type:"project_point",cluster:5,inverse:0,click:!0,color:"grey"},{loc:7.399168498772284,verDist:2.58064581018699,name:"苏州银行",rank:45,type:"project_point",cluster:5,inverse:1,click:!1,color:"rgb(44, 162, 95)"},{loc:9.011243075521243,verDist:.0768032451780703,name:"西安银行",rank:32,type:"project_point",cluster:4,inverse:0,click:!1,color:"grey"},{loc:9.155147601796997,verDist:1.904471639061937,name:"重庆三峡银行",rank:37,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:9.467986473907965,verDist:2.2451971452124084,name:"江苏江南农商",rank:48,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:10.123104486774444,verDist:.29913612490399927,name:"九江银行",rank:50,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:9.30861732515267,verDist:.49947756351076156,name:"青岛农商",rank:38,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:10.1052384272938,verDist:.38140630432648404,name:"赣州银行",rank:46,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:8.987591083061895,verDist:.39753265654200315,name:"江苏张家港农商",rank:41,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:11.036936634647443,verDist:1.8542984383322234,name:"江西银行",rank:47,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:11.48840857009353,verDist:.9569387232118843,name:"乌鲁木齐银行",rank:36,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:11.498809324183954,verDist:.13872027295715925,name:"江苏江阴农商",rank:39,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:10.89192139180211,verDist:1.2714050138597517,name:"甘肃银行",rank:51,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:11.643248077823085,verDist:.3012620455023323,name:"金华银行",rank:49,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:9.947669644150844,verDist:3.127550588121523,name:"广州银行",rank:16,type:"project_point",cluster:3,inverse:-2,click:!0,color:"rgb(255, 0, 0)"},{loc:10.023628100870946,verDist:3.1919968560048835,name:"天津银行",rank:40,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:12.639998577880652,verDist:.45012872154230177,name:"广东顺德农商",rank:44,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:11.14222027307709,verDist:2.759675361481659,name:"晋商银行",rank:43,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"},{loc:11.566425840465966,verDist:1.7162663785480625,name:"郑州银行",rank:52,type:"project_point",cluster:5,inverse:0,click:!1,color:"grey"}];let s=this,n=e.length,o=0;for(let m=0;m<n;m++)for(let t=m+1;t<n;t++)o+=s.pointDistance(e[0],e[1]);o/=n*(n-1)/2;let l=t.length,c=0,d=[{loc:0,type:"poly_point",verDist:0,cluster:1}],p=[{loc:-100,type:"poly_point",verDist:0,cluster:-100}];p.push({loc:0,type:"poly_point",verDist:0,cluster:1});for(let m=0;m<l-1;m++){let n=t[m],l=t[m+1],u={};e.map((t,e)=>{let[p,h,m]=s.minDistance(t,n,l);p<5*o&&0!=p&&(u={loc:c+m,verDist:h,name:a[e],rank:r[e],type:"project_point",cluster:i[e]},d.push(u))}),c+=s.pointDistance(n,l),console.log("startLoc",c),d.push({loc:c,type:"poly_point",verDist:0,cluster:m+2}),p.push({loc:c,type:"poly_point",verDist:0,cluster:m+2})}p.push({loc:100,type:"poly_point",verDist:0,cluster:100}),d.map(t=>{if("project_point"==t["type"]){t["inverse"]=0;for(let e=0;e<p.length-1;e++)if(t["loc"]>=p[e]["loc"]&&t["loc"]<=p[e+1]["loc"]){t["cluster"]>p[e]["cluster"]&&t["cluster"]>p[e+1]["cluster"]&&(t["inverse"]=t["cluster"]-p[e+1]["cluster"]),t["cluster"]<p[e]["cluster"]&&t["cluster"]<p[e+1]["cluster"]&&(t["inverse"]=t["cluster"]-p[e]["cluster"]);break}}});let u=[],h={};return d.map(t=>{"poly_point"==t["type"]?u.push(t):(-1==Object.keys(h).indexOf(t["name"])&&(h[t["name"]]=[]),h[t["name"]].push(t))}),Object.keys(h).map(t=>{h[t].sort((function(t,e){return t.verDist-e.verDist})),u=u.concat(h[t][0])}),u},pointDistance(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},minDistance(t,e,a){let r=[null,null];r[0]=a[0]-e[0],r[1]=a[1]-e[1];let i=[null,null];i[0]=t[0]-a[0],i[1]=t[1]-a[1];let s=[null,null];s[0]=t[0]-e[0],s[1]=t[1]-e[1];let n=r[0]*i[0]+r[1]*i[1],o=r[0]*s[0]+r[1]*s[1],l=0;if(n>0){let e=t[1]-a[1],r=t[0]-a[0];l=Math.sqrt(r*r+e*e)}else if(o<0){let a=t[1]-e[1],r=t[0]-e[0];l=Math.sqrt(r*r+a*a)}else{let t=r[0],e=r[1],a=s[0],i=s[1],n=Math.sqrt(t*t+e*e);l=Math.abs(t*i-e*a)/n}let c=r[0],d=r[1],p=s[0],u=s[1],h=Math.sqrt(c*c+d*d),m=Math.abs(c*u-d*p)/h,f=o/Math.abs(o)*Math.sqrt(s[0]*s[0]+s[1]*s[1]-m*m);return[l,m,f]},getTsneData(t){if(this.initialize)return[[8.626784179912516,8.786282958379665],[8.202135553535891,9.039965009142392],[8.137636755746836,9.07903514230932],[7.908557115661836,9.047549567735048],[5.097593130365054,9.357220300400149],[5.191373801194004,9.464637750275427],[4.199835790091962,10],[3.9735964221231534,9.197909894732195],[3.309444564006414,9.358202303306506],[3.2799243333533825,9.028854613114804],[2.7397045750785542,8.461972651943865],[2.3487171302054226,7.753009034813207],[3.0630585646703814,6.191925980671238],[3.3621949025098656,8.957437675110206],[2.023753145343412,6.8743657283465005],[3.0444930915872197,6.588544987684668],[4.173063202308695,6.269402641192766],[8.079040271706614,5.856930710553778],[8.594639731970556,5.679483925395746],[7.1179528125277365,5.041445967799854],[2.9348945790951597,5.785624953436854],[7.019712604908891,4.847293477176008],[3.8837139603282287,5.861592186122443],[10,4.921897261833848],[4.951589762632292,3.239067324092244],[6.5980318317311015,3.958851900672834],[5.599564307906686,2.443521659061819],[4.689666798488185,2.5577420893849134],[3.334681967451906,3.1496305925420884],[6.247355771492269,4.301143229828555],[4.422780140124472,3.097101820836609],[6.667817306424883,6.156567538310914],[5.682754274208247,3.028962058557803],[1.456373783224354,5.216912959659048],[3.614831146802394,4.811344784848229],[6.038615263577364,3.790168186213],[2.975246830976853,2.8622291824902337],[3.8748953667357844,2.9619616761213563],[1.351931634253336,3.921812743402904],[2.5001228984733515,2.6317228483935273],[2.231912884859762,3.884863624928231],[2.855988375914028,4.372070958961843],[6.6104756772289335,3.92202855355986],[1.153476227854593,2.226879101626328],[.6315524891840768,2.919301341469778],[4.9099078081425525,3.111703493197985],[1.344584651060074,3.4902586171637786],[6.789587090669313,6.130205518692106],[.7877623799963995,5.209446731535458],[2.75463098779472,3.914326155055407],[3.165697316600431,2.5425900838754947],[7.4529175685859155,2.7931561250176253]];{let e=t.length,a=t[0].length,r=[];for(let n=0;n<a;n++){r.push({min:1e9,max:0});for(let a=0;a<e;a++)r[n].min=Math.min(r[n].min,t[a][n]),r[n].max=Math.max(r[n].max,t[a][n])}let i=new f.a({dim:2,perplexity:30,earlyExaggeration:4,learningRate:100,nIter:2e3,metric:"euclidean"});i.init({data:t,type:"dense"}),i.run(),i.getOutput();let s=i.getOutputScaled();return s.map(t=>{t[0]=5*(t[0]+1),t[1]=5*(t[1]+1)}),s}},getRank(t,e,a,r){let i=[],s=0;for(let p=0;p<t.length;p++){var n=0;let o={},l={};for(let a=0;a<t[p].length;a++)n+=t[p][a],l[r[a]]=t[p][a],o[r[a]]=e[p][a];s=Math.max(s,n),i.push({originOrder:p,score:n,name:a[p],weightDim:l,originDim:o})}i.map(t=>{t["score"]=100*t["score"]/s;let e=0;Object.keys(t["weightDim"]).map(a=>{e+=t["weightDim"][a]}),Object.keys(t["weightDim"]).map(a=>{t["weightDim"][a]=t["score"]*t["weightDim"][a]/e})}),i.sort((function(t,e){return e.score-t.score})),i.map((t,e)=>{t["rank"]=e+1});let o=0,l=0;i[0]["loc"]=l;for(let p=0;p<i.length-1;p++)l+=i[p]["score"]-i[p+1]["score"],i[p+1]["loc"]=l,o=Math.max(o,l);i.map(t=>{t["loc"]/=o});let c=this.deepClone(i);console.log("score",i,t),i.sort((function(t,e){return t.originOrder-e.originOrder})),console.log("score",i,t);var d=i.map(t=>t["rank"]);return[c,d]},getWeightData(t,e){let a=this;function r(t){var e=d3.max(t);for(var a in t)t[a]=e-t[a];return t}function i(t){return t[0].map((function(e,a){return t.map((function(t){return t[a]}))}))}function s(t){var e=[];for(var a in t){var r=0;for(var i in t[a])r+=Math.pow(t[a][i],2);e.push(Math.pow(r,.5))}for(let s in t)for(let a in t[s])0!=e[s]&&(t[s][a]/=e[s]);return t}t=i(t);var n=[];for(var o in t)a.valueDirections[e[o]]?n.push(t[o]):n.push(r(t[o]));n=s(n),n=i(n);let l=Object.values(a.valueWeight);for(let c=0;c<n.length;c++)for(let t=0;t<n[c].length;t++)n[c][t]*=l[t];return n},setScatterIndex(t){this.scatterIndex=t,1==t?console.log("第一个散点图被点击了ScatterOfD3"):2==t?console.log("第二个散点图被点击了ScatterOfD3Two"):console.log("第三个散点图被点击了ScatterOfD3Two")},selectedIDsArr(t){console.log("选中的银行数据",t)},deepClone(t){let e=this;if(!t&&"object"!==typeof t)throw new Error("error arguments","deepClone");const a=t.constructor===Array?[]:{};return Object.keys(t).forEach(r=>{t[r]&&"object"===typeof t[r]?a[r]=e.deepClone(t[r]):a[r]=t[r]}),a},dragBank(t){console.log("拖拽银行----",t),this.valueWeight=this.getSVMWeight(this.rankAxisData,t),this.init()},getChooseColor(t){this.chooseColorArr=t}}},xt=vt,Rt=(a("21bb"),Object(o["a"])(xt,u,h,!1,null,null,null)),bt=Rt.exports;r["a"].use(p["a"]);const Dt=[{path:"/",name:"Home",component:bt}],wt=new p["a"]({routes:Dt});var At=wt,Pt=a("2f62");r["a"].use(Pt["a"]);var Ct=new Pt["a"].Store({state:{},mutations:{},actions:{},modules:{}}),_t=a("bc3a"),Lt=a.n(_t),jt=(a("a0d8"),a("5698"));window.d3=jt,r["a"].prototype.axios=Lt.a,r["a"].config.productionTip=!1,new r["a"]({router:At,store:Ct,render:t=>t(d)}).$mount("#app")},5817:function(t,e,a){"use strict";var r=a("f579"),i=a.n(r);i.a},5967:function(t,e,a){t.exports=a.p+"static/img/rankComImg1.eb6d3e9b.svg"},"62f4":function(t,e,a){"use strict";var r=a("33d5"),i=a.n(r);i.a},"7bdf":function(t,e,a){"use strict";var r=a("147a"),i=a.n(r);i.a},"84b3":function(t,e,a){},"85ec":function(t,e,a){},9137:function(t,e,a){"use strict";var r=a("d892"),i=a.n(r);i.a},9654:function(t){t.exports=JSON.parse('[{"name":"工商银行","assetSize":276995,"capitalAdequacyRatio":0.1539,"nonPerformingLoansRatio":0.0152,"concernRate":0.0292,"provisionCoverage":1.7576,"liquidityRatio":0.438,"assetProfitRatio":0.0111,"capitalProfitRatio":0.1379},{"name":"建设银行","assetSize":232227,"capitalAdequacyRatio":0.1719,"nonPerformingLoansRatio":0.0146,"concernRate":0.0281,"provisionCoverage":2.0837,"liquidityRatio":0.4769,"assetProfitRatio":0.0113,"capitalProfitRatio":0.1404},{"name":"农业银行","assetSize":226095,"capitalAdequacyRatio":0.1512,"nonPerformingLoansRatio":0.0159,"concernRate":0.0274,"provisionCoverage":2.5218,"liquidityRatio":0.5517,"assetProfitRatio":0.0093,"capitalProfitRatio":0.1366},{"name":"中国银行","assetSize":212673,"capitalAdequacyRatio":0.1497,"nonPerformingLoansRatio":0.0142,"concernRate":0.029,"provisionCoverage":1.8197,"liquidityRatio":0.587,"assetProfitRatio":0.0094,"capitalProfitRatio":0.1206},{"name":"交通银行","assetSize":95312,"capitalAdequacyRatio":0.1437,"nonPerformingLoansRatio":0.0149,"concernRate":0.0245,"provisionCoverage":1.7313,"liquidityRatio":0.6728,"assetProfitRatio":0.008,"capitalProfitRatio":0.1117},{"name":"邮储银行","assetSize":95162,"capitalAdequacyRatio":0.1376,"nonPerformingLoansRatio":0.0086,"concernRate":0.0149,"provisionCoverage":2.468,"liquidityRatio":0.6117,"assetProfitRatio":0.0057,"capitalProfitRatio":0.1231},{"name":"招商银行","assetSize":67457,"capitalAdequacyRatio":0.1568,"nonPerformingLoansRatio":0.0136,"concernRate":0.0151,"provisionCoverage":3.5818,"liquidityRatio":0.5195,"assetProfitRatio":0.0124,"capitalProfitRatio":0.1657},{"name":"兴业银行","assetSize":67117,"capitalAdequacyRatio":0.122,"nonPerformingLoansRatio":0.0157,"concernRate":0.0205,"provisionCoverage":2.0728,"liquidityRatio":0.6652,"assetProfitRatio":0.0093,"capitalProfitRatio":0.1427},{"name":"浦发银行","assetSize":62896,"capitalAdequacyRatio":0.1367,"nonPerformingLoansRatio":0.0192,"concernRate":0.0295,"provisionCoverage":1.5488,"liquidityRatio":0.5543,"assetProfitRatio":0.0091,"capitalProfitRatio":0.1314},{"name":"中信银行","assetSize":60667,"capitalAdequacyRatio":0.1247,"nonPerformingLoansRatio":0.0177,"concernRate":0.0236,"provisionCoverage":1.5798,"liquidityRatio":0.508,"assetProfitRatio":0.0077,"capitalProfitRatio":0.1139},{"name":"光大银行","assetSize":43573,"capitalAdequacyRatio":0.1301,"nonPerformingLoansRatio":0.0159,"concernRate":0.0241,"provisionCoverage":1.7616,"liquidityRatio":0.6426,"assetProfitRatio":0.008,"capitalProfitRatio":0.1155},{"name":"平安银行","assetSize":34186,"capitalAdequacyRatio":0.115,"nonPerformingLoansRatio":0.0175,"concernRate":0.0273,"provisionCoverage":1.5524,"liquidityRatio":0.6086,"assetProfitRatio":0.0073,"capitalProfitRatio":0.1149},{"name":"北京银行","assetSize":25729,"capitalAdequacyRatio":0.1207,"nonPerformingLoansRatio":0.0146,"concernRate":0.0088,"provisionCoverage":2.1751,"liquidityRatio":0.5593,"assetProfitRatio":0.0082,"capitalProfitRatio":0.1165},{"name":"民生银行","assetSize":59948,"capitalAdequacyRatio":0.1175,"nonPerformingLoansRatio":0.0176,"concernRate":0.0338,"provisionCoverage":1.3405,"liquidityRatio":0.5164,"assetProfitRatio":0.0085,"capitalProfitRatio":0.1294},{"name":"华夏银行","assetSize":26806,"capitalAdequacyRatio":0.1319,"nonPerformingLoansRatio":0.0185,"concernRate":0.0444,"provisionCoverage":1.5859,"liquidityRatio":0.5123,"assetProfitRatio":0.0081,"capitalProfitRatio":0.1267},{"name":"广发银行","assetSize":23609,"capitalAdequacyRatio":0.1178,"nonPerformingLoansRatio":0.0145,"concernRate":0.0334,"provisionCoverage":1.5106,"liquidityRatio":0.8058,"assetProfitRatio":0.0048,"capitalProfitRatio":0.0882},{"name":"浙商银行","assetSize":16467,"capitalAdequacyRatio":0.1338,"nonPerformingLoansRatio":0.012,"concernRate":0.0162,"provisionCoverage":2.7037,"liquidityRatio":0.528,"assetProfitRatio":0.0073,"capitalProfitRatio":0.1417},{"name":"南京银行","assetSize":12433,"capitalAdequacyRatio":0.1293,"nonPerformingLoansRatio":0.0089,"concernRate":0.0142,"provisionCoverage":4.6268,"liquidityRatio":0.5162,"assetProfitRatio":0.0093,"capitalProfitRatio":0.1696},{"name":"宁波银行","assetSize":11164,"capitalAdequacyRatio":0.1486,"nonPerformingLoansRatio":0.0078,"concernRate":0.0055,"provisionCoverage":5.2183,"liquidityRatio":0.5743,"assetProfitRatio":0.0104,"capitalProfitRatio":0.1872},{"name":"徽商银行","assetSize":10505,"capitalAdequacyRatio":0.1165,"nonPerformingLoansRatio":0.0104,"concernRate":0.0053,"provisionCoverage":3.0222,"liquidityRatio":0.3719,"assetProfitRatio":0.009,"capitalProfitRatio":0.1508},{"name":"渤海银行","assetSize":10345,"capitalAdequacyRatio":0.1177,"nonPerformingLoansRatio":0.0184,"concernRate":0.0288,"provisionCoverage":1.8696,"liquidityRatio":0.5637,"assetProfitRatio":0.007,"capitalProfitRatio":0.1359},{"name":"重庆农商","assetSize":9506,"capitalAdequacyRatio":0.1352,"nonPerformingLoansRatio":0.0129,"concernRate":0.0193,"provisionCoverage":3.4779,"liquidityRatio":0.5171,"assetProfitRatio":0.0099,"capitalProfitRatio":0.1347},{"name":"杭州银行","assetSize":9211,"capitalAdequacyRatio":0.1371,"nonPerformingLoansRatio":0.0145,"concernRate":0.0126,"provisionCoverage":2.56,"liquidityRatio":0.5543,"assetProfitRatio":0.0062,"capitalProfitRatio":0.1101},{"name":"北京农商","assetSize":8811,"capitalAdequacyRatio":0.1526,"nonPerformingLoansRatio":0.0036,"concernRate":0.0029,"provisionCoverage":10.6887,"liquidityRatio":0.6562,"assetProfitRatio":0.0085,"capitalProfitRatio":0.15},{"name":"广州农商","assetSize":7633,"capitalAdequacyRatio":0.1428,"nonPerformingLoansRatio":0.0127,"concernRate":0.0258,"provisionCoverage":2.7664,"liquidityRatio":0.7691,"assetProfitRatio":0.0091,"capitalProfitRatio":0.1313},{"name":"长沙银行","assetSize":5266,"capitalAdequacyRatio":0.1224,"nonPerformingLoansRatio":0.0129,"concernRate":0.029,"provisionCoverage":2.754,"liquidityRatio":0.5753,"assetProfitRatio":0.0092,"capitalProfitRatio":0.1691},{"name":"广州银行","assetSize":5136,"capitalAdequacyRatio":0.1338,"nonPerformingLoansRatio":0.0086,"concernRate":0.013,"provisionCoverage":2.3126,"liquidityRatio":0.8595,"assetProfitRatio":0.0079,"capitalProfitRatio":0.1223},{"name":"贵阳银行","assetSize":5033,"capitalAdequacyRatio":0.1297,"nonPerformingLoansRatio":0.0135,"concernRate":0.0259,"provisionCoverage":2.6605,"liquidityRatio":0.8584,"assetProfitRatio":0.0108,"capitalProfitRatio":0.1888},{"name":"天津银行","assetSize":6593,"capitalAdequacyRatio":0.1453,"nonPerformingLoansRatio":0.0164,"concernRate":0.0461,"provisionCoverage":2.5037,"liquidityRatio":0.5029,"assetProfitRatio":0.0062,"capitalProfitRatio":0.0915},{"name":"成都银行","assetSize":4923,"capitalAdequacyRatio":0.1408,"nonPerformingLoansRatio":0.0154,"concernRate":0.0188,"provisionCoverage":2.3701,"liquidityRatio":0.7922,"assetProfitRatio":0.01,"capitalProfitRatio":0.1604},{"name":"重庆银行","assetSize":4504,"capitalAdequacyRatio":0.1321,"nonPerformingLoansRatio":0.0136,"concernRate":0.0331,"provisionCoverage":2.2587,"liquidityRatio":0.9253,"assetProfitRatio":0.0088,"capitalProfitRatio":0.128},{"name":"深圳农商","assetSize":3169,"capitalAdequacyRatio":0.1368,"nonPerformingLoansRatio":0.0114,"concernRate":0.0448,"provisionCoverage":2.5071,"liquidityRatio":0.5163,"assetProfitRatio":0.0146,"capitalProfitRatio":0.1662},{"name":"东莞银行","assetSize":3145,"capitalAdequacyRatio":0.1303,"nonPerformingLoansRatio":0.0139,"concernRate":0.0184,"provisionCoverage":1.8206,"liquidityRatio":0.7773,"assetProfitRatio":0.0085,"capitalProfitRatio":0.1267},{"name":"苏州银行","assetSize":3111,"capitalAdequacyRatio":0.1296,"nonPerformingLoansRatio":0.017,"concernRate":0.0266,"provisionCoverage":1.7433,"liquidityRatio":0.5166,"assetProfitRatio":0.0078,"capitalProfitRatio":0.0999},{"name":"广东顺德农商","assetSize":2979,"capitalAdequacyRatio":0.1395,"nonPerformingLoansRatio":0.0176,"concernRate":0.0145,"provisionCoverage":1.7395,"liquidityRatio":0.4325,"assetProfitRatio":0.0092,"capitalProfitRatio":0.1081},{"name":"西安银行","assetSize":2435,"capitalAdequacyRatio":0.1417,"nonPerformingLoansRatio":0.012,"concernRate":0.0227,"provisionCoverage":2.1653,"liquidityRatio":0.4771,"assetProfitRatio":0.0099,"capitalProfitRatio":0.125},{"name":"晋商银行","assetSize":2276,"capitalAdequacyRatio":0.1299,"nonPerformingLoansRatio":0.0188,"concernRate":0.0265,"provisionCoverage":1.9535,"liquidityRatio":0.8391,"assetProfitRatio":0.0061,"capitalProfitRatio":0.0848},{"name":"重庆三峡银行","assetSize":2047,"capitalAdequacyRatio":0.1293,"nonPerformingLoansRatio":0.013,"concernRate":0.0355,"provisionCoverage":1.6348,"liquidityRatio":0.8638,"assetProfitRatio":0.0063,"capitalProfitRatio":0.0985},{"name":"郑州银行","assetSize":4661,"capitalAdequacyRatio":0.1315,"nonPerformingLoansRatio":0.0246,"concernRate":0.0294,"provisionCoverage":1.5484,"liquidityRatio":0.5639,"assetProfitRatio":0.0063,"capitalProfitRatio":0.1003},{"name":"江西银行","assetSize":4191,"capitalAdequacyRatio":0.136,"nonPerformingLoansRatio":0.019,"concernRate":0.0499,"provisionCoverage":1.7142,"liquidityRatio":0.5793,"assetProfitRatio":0.007,"capitalProfitRatio":0.0995},{"name":"江苏江南农商","assetSize":3798,"capitalAdequacyRatio":0.1295,"nonPerformingLoansRatio":0.0181,"concernRate":0.0365,"provisionCoverage":1.7646,"liquidityRatio":0.4998,"assetProfitRatio":0.0065,"capitalProfitRatio":0.1},{"name":"九江银行","assetSize":3116,"capitalAdequacyRatio":0.1155,"nonPerformingLoansRatio":0.0199,"concernRate":0.014,"provisionCoverage":1.6969,"liquidityRatio":0.5499,"assetProfitRatio":0.0061,"capitalProfitRatio":0.0866},{"name":"青岛农商","assetSize":2941,"capitalAdequacyRatio":0.1255,"nonPerformingLoansRatio":0.0157,"concernRate":0.0715,"provisionCoverage":2.9005,"liquidityRatio":0.5965,"assetProfitRatio":0.009,"capitalProfitRatio":0.1277},{"name":"乌鲁木齐银行","assetSize":1527,"capitalAdequacyRatio":0.1758,"nonPerformingLoansRatio":0.0193,"concernRate":0.0165,"provisionCoverage":2.0871,"liquidityRatio":0.656,"assetProfitRatio":0.0086,"capitalProfitRatio":0.1001},{"name":"赣州银行","assetSize":1365,"capitalAdequacyRatio":0.1209,"nonPerformingLoansRatio":0.0188,"concernRate":0.0275,"provisionCoverage":1.5386,"liquidityRatio":0.7804,"assetProfitRatio":0.0067,"capitalProfitRatio":0.0995},{"name":"江苏苏州农商","assetSize":1168,"capitalAdequacyRatio":0.1489,"nonPerformingLoansRatio":0.0131,"concernRate":0.0467,"provisionCoverage":2.4818,"liquidityRatio":0.6753,"assetProfitRatio":0.0076,"capitalProfitRatio":0.0908},{"name":"江苏江阴农商","assetSize":1149,"capitalAdequacyRatio":0.1521,"nonPerformingLoansRatio":0.0215,"concernRate":0.0167,"provisionCoverage":2.3371,"liquidityRatio":0.8649,"assetProfitRatio":0.007,"capitalProfitRatio":0.0872},{"name":"江苏昆山农商","assetSize":1017,"capitalAdequacyRatio":0.1371,"nonPerformingLoansRatio":0.013,"concernRate":0.0329,"provisionCoverage":3.8872,"liquidityRatio":0.5981,"assetProfitRatio":0.0101,"capitalProfitRatio":0.1347},{"name":"甘肃银行","assetSize":3286,"capitalAdequacyRatio":0.1355,"nonPerformingLoansRatio":0.0229,"concernRate":0.0814,"provisionCoverage":1.6947,"liquidityRatio":0.4471,"assetProfitRatio":0.0115,"capitalProfitRatio":0.1643},{"name":"江苏张家港农商","assetSize":1134.46,"capitalAdequacyRatio":0.1565,"nonPerformingLoansRatio":0.0147,"concernRate":0.0524,"provisionCoverage":2.2385,"liquidityRatio":0.5138,"assetProfitRatio":0.0076,"capitalProfitRatio":0.0939},{"name":"金华银行","assetSize":721,"capitalAdequacyRatio":0.1384,"nonPerformingLoansRatio":0.0169,"concernRate":0.0286,"provisionCoverage":1.5006,"liquidityRatio":0.7579,"assetProfitRatio":0.0028,"capitalProfitRatio":0.0451},{"name":"嘉兴银行","assetSize":673,"capitalAdequacyRatio":0.1248,"nonPerformingLoansRatio":0.0113,"concernRate":0.0269,"provisionCoverage":3.3658,"liquidityRatio":0.6434,"assetProfitRatio":0.0097,"capitalProfitRatio":0.1461}]')},9910:function(t,e,a){"use strict";var r=a("84b3"),i=a.n(r);i.a},"9fba":function(t,e,a){},a0d8:function(t,e,a){},ac1e:function(t,e,a){t.exports=a.p+"static/img/brokenLine2.695c21f8.svg"},ad8d:function(t,e,a){t.exports=a.p+"static/img/cluster2.6437d2f6.svg"},b879:function(t,e,a){t.exports=a.p+"static/img/rankComImg2.f077ae57.svg"},bed1:function(t,e,a){"use strict";var r=a("41a4"),i=a.n(r);i.a},d892:function(t,e,a){},f579:function(t,e,a){}});